(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{255:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Badge:()=>i.Badge,Button:()=>a.Button,Card:()=>s.Card,CardContent:()=>s.CardContent,CardDescription:()=>s.CardDescription,CardFooter:()=>s.CardFooter,CardHeader:()=>s.CardHeader,CardTitle:()=>s.CardTitle,Dialog:()=>d.Dialog,DialogContent:()=>d.DialogContent,DialogDescription:()=>d.DialogDescription,DialogFooter:()=>d.DialogFooter,DialogHeader:()=>d.DialogHeader,DialogTitle:()=>d.DialogTitle,DialogTrigger:()=>d.DialogTrigger,Input:()=>n.Input,Label:()=>o.Label,Select:()=>p.Select,SelectContent:()=>p.SelectContent,SelectItem:()=>p.SelectItem,SelectTrigger:()=>p.SelectTrigger,SelectValue:()=>p.SelectValue,Table:()=>c.Table,TableBody:()=>c.TableBody,TableCell:()=>c.TableCell,TableHead:()=>c.TableHead,TableHeader:()=>c.TableHeader,TableRow:()=>c.TableRow,Tabs:()=>u.Tabs,TabsContent:()=>u.TabsContent,TabsList:()=>u.TabsList,TabsTrigger:()=>u.TabsTrigger,Textarea:()=>l.Textarea,Toaster:()=>m.Toaster,toast:()=>v.toast,useToast:()=>v.useToast});var a=t(256),s=t(263),i=t(264),n=t(265),o=t(266),l=t(269),d=t(270),c=t(328),u=t(329),p=t(341),m=t(358),v=t(362)},256:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Button:()=>l,buttonVariants:()=>o});var a=t(113);t(121);var s=t(257),i=t(259),n=t(261);let o=(0,i.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:i,asChild:l=!1,...d}=e,c=l?s.Slot:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:t,size:i,className:r})),...d})}},263:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Card:()=>i,CardAction:()=>d,CardContent:()=>c,CardDescription:()=>l,CardFooter:()=>u,CardHeader:()=>n,CardTitle:()=>o});var a=t(113);t(121);var s=t(261);function i(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function n(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function o(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",r),...t})}function l(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",r),...t})}function d(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-action",className:(0,s.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",r),...t})}function c(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",r),...t})}function u(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",r),...t})}},264:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Badge:()=>l,badgeVariants:()=>o});var a=t(113);t(121);var s=t(257),i=t(259),n=t(261);let o=(0,i.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:t,asChild:i=!1,...l}=e,d=i?s.Slot:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(o({variant:t}),r),...l})}},265:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Input:()=>i});var a=t(113);t(121);var s=t(261);function i(e){let{className:r,type:t,...i}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}},269:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Textarea:()=>i});var a=t(113);t(121);var s=t(261);function i(e){let{className:r,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}},411:(e,r,t)=>{Promise.resolve().then(t.bind(t,412))},412:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d,dynamic:()=>l});var a=t(113),s=t(121),i=t(378),n=t(255),o=t(413);let l="force-dynamic";function d(){let e=(0,i.useRouter)(),{toast:r}=(0,n.useToast)(),[t,l]=(0,s.useState)("role"),[d,c]=(0,s.useState)(null),[u,p]=(0,s.useState)(""),[m,v]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[y,C]=(0,s.useState)(""),[N,S]=(0,s.useState)(""),[T,w]=(0,s.useState)(""),[k,I]=(0,s.useState)(""),L=e=>{c(e),l("form")},D=async t=>{if(t.preventDefault(),x!==f)return void r({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});if("vendor"===d&&!k)return void r({title:"Erreur",description:"Veuillez s\xe9lectionner un type de magasin",variant:"destructive"});try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:d?d.toUpperCase():void 0,name:u,phone:(e=>{let r=e.replace(/\D/g,"");if(r.startsWith("213")){let e=r.slice(3);return e.startsWith("0")?e:"0".concat(e)}return r.startsWith("0")?r:e})(m),email:g,password:x,licenseNumber:"driver"===d?y:void 0,vehicleType:"driver"===d?N:void 0,photoUrl:T||void 0,shopType:"vendor"===d?k:void 0})}),s=await t.json();if(s.success)r({title:"Demande envoy\xe9e",description:"Votre demande d'inscription est en cours d'examen. Vous recevrez une notification une fois approuv\xe9e."}),e.push("/login");else{var a;let e="string"==typeof s.error?s.error:(null==(a=s.error)?void 0:a.message)||"Une erreur s'est produite";r({title:"Erreur",description:e,variant:"destructive"})}}catch(e){r({title:"Erreur",description:"Impossible de soumettre la demande",variant:"destructive"})}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary via-orange-500 to-orange-600 flex items-center justify-center p-4",children:(0,a.jsxs)(n.Card,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(n.CardHeader,{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("img",{src:"/logo.png",alt:"ALBAZ FAST DELIVERY",className:"h-32 w-auto"})}),(0,a.jsx)(n.CardTitle,{className:"text-2xl font-bold",children:"role"===t?"Choisissez votre r\xf4le":"Cr\xe9er un compte"}),(0,a.jsx)(n.CardDescription,{children:"role"===t?"S\xe9lectionnez le type de compte que vous souhaitez cr\xe9er":"Inscription en tant que ".concat("customer"===d?"Client":"driver"===d?"Livreur":"Vendeur")})]}),(0,a.jsxs)(n.CardContent,{children:["role"===t?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("button",{onClick:()=>L("customer"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,a.jsx)(o.Users,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Client"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Commander des produits et services"})]})}),(0,a.jsx)("button",{onClick:()=>L("driver"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,a.jsx)(o.Truck,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Livreur"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Livrer des commandes aux clients"})]})}),(0,a.jsx)("button",{onClick:()=>L("vendor"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,a.jsx)(o.Store,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Vendeur"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Vendre vos produits en ligne"})]})})]}):(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)(n.Button,{type:"button",variant:"ghost",onClick:()=>l("role"),className:"mb-4",children:[(0,a.jsx)(o.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Retour"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"name",children:"vendor"===d?"Nom complet / Nom de l'entreprise":"Nom complet"}),(0,a.jsx)(n.Input,{id:"name",type:"text",placeholder:"Votre nom",value:u,onChange:e=>p(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"phone",children:"Num\xe9ro de t\xe9l\xe9phone"}),(0,a.jsx)(n.Input,{id:"phone",type:"tel",placeholder:"+213 555 123 456",value:m,onChange:e=>v(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"email",children:"Adresse email"}),(0,a.jsx)(n.Input,{id:"email",type:"email",placeholder:"votre@email.com",value:g,onChange:e=>h(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"password",children:"Mot de passe"}),(0,a.jsx)(n.Input,{id:"password",type:"password",placeholder:"••••••••",value:x,onChange:e=>b(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),(0,a.jsx)(n.Input,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:f,onChange:e=>j(e.target.value),required:!0})]}),"driver"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"license",children:"Num\xe9ro de permis de conduire"}),(0,a.jsx)(n.Input,{id:"license",type:"text",placeholder:"ABC123456",value:y,onChange:e=>C(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"vehicleType",children:"Type de v\xe9hicule"}),(0,a.jsxs)(n.Select,{value:N,onValueChange:S,required:!0,children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{placeholder:"S\xe9lectionnez un type"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"motorcycle",children:"Moto / Scooter"}),(0,a.jsx)(n.SelectItem,{value:"car",children:"Voiture"}),(0,a.jsx)(n.SelectItem,{value:"van",children:"Camionnette"}),(0,a.jsx)(n.SelectItem,{value:"bicycle",children:"V\xe9lo"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"photo",children:"Photo du v\xe9hicule (URL)"}),(0,a.jsx)(n.Input,{id:"photo",type:"url",placeholder:"https://exemple.com/photo-vehicule.jpg",value:T,onChange:e=>w(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL de votre v\xe9hicule (optionnel)"})]})]}),"vendor"===d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"shopType",children:"Type de magasin"}),(0,a.jsxs)(n.Select,{value:k,onValueChange:I,required:!0,children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{placeholder:"S\xe9lectionnez un type"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"Restaurant",children:"Restaurant / Plats pr\xe9par\xe9s"}),(0,a.jsx)(n.SelectItem,{value:"\xc9picerie",children:"\xc9picerie"}),(0,a.jsx)(n.SelectItem,{value:"Parapharmacie",children:"Parapharmacie & Beaut\xe9"}),(0,a.jsx)(n.SelectItem,{value:"Cadeaux",children:"Boutique de cadeaux"}),(0,a.jsx)(n.SelectItem,{value:"Boulangerie",children:"Boulangerie / P\xe2tisserie"}),(0,a.jsx)(n.SelectItem,{value:"Caf\xe9",children:"Caf\xe9 / Salon de th\xe9"}),(0,a.jsx)(n.SelectItem,{value:"Fast-food",children:"Fast-food"}),(0,a.jsx)(n.SelectItem,{value:"Autre",children:"Autre"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"photo",children:"Logo du magasin (URL)"}),(0,a.jsx)(n.Input,{id:"photo",type:"url",placeholder:"https://exemple.com/logo-magasin.jpg",value:T,onChange:e=>w(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL du logo de votre magasin (optionnel)"})]})]}),(0,a.jsx)(n.Button,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white",children:"customer"===d?"Cr\xe9er un compte":"Soumettre pour approbation"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/login"),className:"text-sm text-primary hover:underline",children:"Vous avez d\xe9j\xe0 un compte? Se connecter"})})]})]})})}},413:(e,r,t)=>{"use strict";t.r(r),t.d(r,{ArrowLeft:()=>a.default,Store:()=>s.default,Truck:()=>i.default,Users:()=>n.default});var a=t(384),s=t(405),i=t(408),n=t(414)}},e=>{e.O(0,[96,569,587,358],()=>e(e.s=411)),_N_E=e.O()}]);