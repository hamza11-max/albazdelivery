(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{"(app-pages-browser)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22E%3A%5C%5Cnn%5C%5Calbazdelivery%5C%5Capps%5C%5Ccustomer%5C%5Capp%5C%5Csignup%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":(e,r,s)=>{Promise.resolve().then(s.bind(s,"(app-pages-browser)/./app/signup/page.tsx"))},"(app-pages-browser)/./app/signup/page.tsx":(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d,dynamic:()=>n});var t=s("(app-pages-browser)/../../node_modules/next/dist/compiled/react/jsx-runtime.js"),a=s("(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js"),l=s("(app-pages-browser)/../../node_modules/next/dist/api/navigation.js"),i=s("(app-pages-browser)/../../packages/ui/src/index.ts"),o=s("(app-pages-browser)/__barrel_optimize__?names=ArrowLeft,Store,Truck,Users!=!../../node_modules/lucide-react/dist/esm/lucide-react.js");let n="force-dynamic";function d(){let e=(0,l.useRouter)(),{toast:r}=(0,i.useToast)(),[s,n]=(0,a.useState)("role"),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[x,v]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[f,C]=(0,a.useState)(""),[N,S]=(0,a.useState)(""),[w,_]=(0,a.useState)(""),[L,I]=(0,a.useState)(""),k=e=>{c(e),n("form")},A=async s=>{if(s.preventDefault(),g!==b)return void r({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});if("vendor"===d&&!L)return void r({title:"Erreur",description:"Veuillez s\xe9lectionner un type de magasin",variant:"destructive"});try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:d?d.toUpperCase():void 0,name:u,phone:(e=>{let r=e.replace(/\D/g,"");if(r.startsWith("213")){let e=r.slice(3);return e.startsWith("0")?e:"0".concat(e)}return r.startsWith("0")?r:e})(m),email:x,password:g,licenseNumber:"driver"===d?f:void 0,vehicleType:"driver"===d?N:void 0,photoUrl:w||void 0,shopType:"vendor"===d?L:void 0})}),a=await s.json();if(a.success)r({title:"Demande envoy\xe9e",description:"Votre demande d'inscription est en cours d'examen. Vous recevrez une notification une fois approuv\xe9e."}),e.push("/login");else{var t;let e="string"==typeof a.error?a.error:(null==(t=a.error)?void 0:t.message)||"Une erreur s'est produite";r({title:"Erreur",description:e,variant:"destructive"})}}catch(e){r({title:"Erreur",description:"Impossible de soumettre la demande",variant:"destructive"})}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary via-orange-500 to-orange-600 flex items-center justify-center p-4",children:(0,t.jsxs)(i.Card,{className:"w-full max-w-2xl",children:[(0,t.jsxs)(i.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("img",{src:"/logo.png",alt:"ALBAZ FAST DELIVERY",className:"h-32 w-auto"})}),(0,t.jsx)(i.CardTitle,{className:"text-2xl font-bold",children:"role"===s?"Choisissez votre r\xf4le":"Cr\xe9er un compte"}),(0,t.jsx)(i.CardDescription,{children:"role"===s?"S\xe9lectionnez le type de compte que vous souhaitez cr\xe9er":"Inscription en tant que ".concat("customer"===d?"Client":"driver"===d?"Livreur":"Vendeur")})]}),(0,t.jsxs)(i.CardContent,{children:["role"===s?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("button",{onClick:()=>k("customer"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,t.jsx)(o.Users,{className:"w-8 h-8 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg",children:"Client"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Commander des produits et services"})]})}),(0,t.jsx)("button",{onClick:()=>k("driver"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,t.jsx)(o.Truck,{className:"w-8 h-8 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg",children:"Livreur"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Livrer des commandes aux clients"})]})}),(0,t.jsx)("button",{onClick:()=>k("vendor"),className:"p-6 border-2 border-muted rounded-lg hover:border-primary hover:bg-primary/5 transition-all group",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 group-hover:bg-primary/20 flex items-center justify-center transition-colors",children:(0,t.jsx)(o.Store,{className:"w-8 h-8 text-primary"})}),(0,t.jsx)("h3",{className:"font-bold text-lg",children:"Vendeur"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Vendre vos produits en ligne"})]})})]}):(0,t.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,t.jsxs)(i.Button,{type:"button",variant:"ghost",onClick:()=>n("role"),className:"mb-4",children:[(0,t.jsx)(o.ArrowLeft,{className:"w-4 h-4 mr-2"}),"Retour"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"name",children:"vendor"===d?"Nom complet / Nom de l'entreprise":"Nom complet"}),(0,t.jsx)(i.Input,{id:"name",type:"text",placeholder:"Votre nom",value:u,onChange:e=>p(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"phone",children:"Num\xe9ro de t\xe9l\xe9phone"}),(0,t.jsx)(i.Input,{id:"phone",type:"tel",placeholder:"+213 555 123 456",value:m,onChange:e=>h(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"email",children:"Adresse email"}),(0,t.jsx)(i.Input,{id:"email",type:"email",placeholder:"votre@email.com",value:x,onChange:e=>v(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"password",children:"Mot de passe"}),(0,t.jsx)(i.Input,{id:"password",type:"password",placeholder:"••••••••",value:g,onChange:e=>j(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),(0,t.jsx)(i.Input,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:b,onChange:e=>y(e.target.value),required:!0})]}),"driver"===d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"license",children:"Num\xe9ro de permis de conduire"}),(0,t.jsx)(i.Input,{id:"license",type:"text",placeholder:"ABC123456",value:f,onChange:e=>C(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"vehicleType",children:"Type de v\xe9hicule"}),(0,t.jsxs)(i.Select,{value:N,onValueChange:S,required:!0,children:[(0,t.jsx)(i.SelectTrigger,{children:(0,t.jsx)(i.SelectValue,{placeholder:"S\xe9lectionnez un type"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"motorcycle",children:"Moto / Scooter"}),(0,t.jsx)(i.SelectItem,{value:"car",children:"Voiture"}),(0,t.jsx)(i.SelectItem,{value:"van",children:"Camionnette"}),(0,t.jsx)(i.SelectItem,{value:"bicycle",children:"V\xe9lo"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"photo",children:"Photo du v\xe9hicule (URL)"}),(0,t.jsx)(i.Input,{id:"photo",type:"url",placeholder:"https://exemple.com/photo-vehicule.jpg",value:w,onChange:e=>_(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL de votre v\xe9hicule (optionnel)"})]})]}),"vendor"===d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"shopType",children:"Type de magasin"}),(0,t.jsxs)(i.Select,{value:L,onValueChange:I,required:!0,children:[(0,t.jsx)(i.SelectTrigger,{children:(0,t.jsx)(i.SelectValue,{placeholder:"S\xe9lectionnez un type"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"Restaurant",children:"Restaurant / Plats pr\xe9par\xe9s"}),(0,t.jsx)(i.SelectItem,{value:"\xc9picerie",children:"\xc9picerie"}),(0,t.jsx)(i.SelectItem,{value:"Parapharmacie",children:"Parapharmacie & Beaut\xe9"}),(0,t.jsx)(i.SelectItem,{value:"Cadeaux",children:"Boutique de cadeaux"}),(0,t.jsx)(i.SelectItem,{value:"Boulangerie",children:"Boulangerie / P\xe2tisserie"}),(0,t.jsx)(i.SelectItem,{value:"Caf\xe9",children:"Caf\xe9 / Salon de th\xe9"}),(0,t.jsx)(i.SelectItem,{value:"Fast-food",children:"Fast-food"}),(0,t.jsx)(i.SelectItem,{value:"Autre",children:"Autre"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"photo",children:"Logo du magasin (URL)"}),(0,t.jsx)(i.Input,{id:"photo",type:"url",placeholder:"https://exemple.com/logo-magasin.jpg",value:w,onChange:e=>_(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL du logo de votre magasin (optionnel)"})]})]}),(0,t.jsx)(i.Button,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-orange-500 text-white",children:"customer"===d?"Cr\xe9er un compte":"Soumettre pour approbation"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>e.push("/login"),className:"text-sm text-primary hover:underline",children:"Vous avez d\xe9j\xe0 un compte? Se connecter"})})]})]})})}},"(app-pages-browser)/__barrel_optimize__?names=ArrowLeft,Store,Truck,Users!=!../../node_modules/lucide-react/dist/esm/lucide-react.js":(e,r,s)=>{"use strict";s.r(r),s.d(r,{ArrowLeft:()=>t.default,Store:()=>a.default,Truck:()=>l.default,Users:()=>i.default});var t=s("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/arrow-left.js"),a=s("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/store.js"),l=s("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/truck.js"),i=s("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/users.js")}},e=>{e.O(0,[96,76,587,358],()=>e(e.s="(app-pages-browser)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22E%3A%5C%5Cnn%5C%5Calbazdelivery%5C%5Capps%5C%5Ccustomer%5C%5Capp%5C%5Csignup%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")),_N_E=e.O()}]);