(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{255:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Badge:()=>n.Badge,Button:()=>s.Button,Card:()=>a.Card,CardContent:()=>a.CardContent,CardDescription:()=>a.CardDescription,CardFooter:()=>a.CardFooter,CardHeader:()=>a.CardHeader,CardTitle:()=>a.CardTitle,Dialog:()=>d.Dialog,DialogContent:()=>d.DialogContent,DialogDescription:()=>d.DialogDescription,DialogFooter:()=>d.DialogFooter,DialogHeader:()=>d.DialogHeader,DialogTitle:()=>d.DialogTitle,DialogTrigger:()=>d.DialogTrigger,Input:()=>i.Input,Label:()=>l.Label,Select:()=>u.Select,SelectContent:()=>u.SelectContent,SelectItem:()=>u.SelectItem,SelectTrigger:()=>u.SelectTrigger,SelectValue:()=>u.SelectValue,Table:()=>c.Table,TableBody:()=>c.TableBody,TableCell:()=>c.TableCell,TableHead:()=>c.TableHead,TableHeader:()=>c.TableHeader,TableRow:()=>c.TableRow,Tabs:()=>m.Tabs,TabsContent:()=>m.TabsContent,TabsList:()=>m.TabsList,TabsTrigger:()=>m.TabsTrigger,Textarea:()=>o.Textarea,Toaster:()=>x.Toaster,toast:()=>g.toast,useToast:()=>g.useToast});var s=t(256),a=t(263),n=t(264),i=t(265),l=t(266),o=t(269),d=t(270),c=t(328),m=t(329),u=t(341),x=t(358),g=t(362)},256:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Button:()=>o,buttonVariants:()=>l});var s=t(113);t(121);var a=t(257),n=t(259),i=t(261);let l=(0,n.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:r,variant:t,size:n,asChild:o=!1,...d}=e,c=o?a.Slot:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:t,size:n,className:r})),...d})}},263:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Card:()=>n,CardAction:()=>d,CardContent:()=>c,CardDescription:()=>o,CardFooter:()=>m,CardHeader:()=>i,CardTitle:()=>l});var s=t(113);t(121);var a=t(261);function n(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function i(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function l(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...t})}function o(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...t})}function d(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-action",className:(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",r),...t})}function c(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...t})}function m(e){let{className:r,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",r),...t})}},264:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Badge:()=>o,badgeVariants:()=>l});var s=t(113);t(121);var a=t(257),n=t(259),i=t(261);let l=(0,n.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:t,asChild:n=!1,...o}=e,d=n?a.Slot:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:t}),r),...o})}},265:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Input:()=>n});var s=t(113);t(121);var a=t(261);function n(e){let{className:r,type:t,...n}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...n})}},269:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Textarea:()=>n});var s=t(113);t(121);var a=t(261);function n(e){let{className:r,...t}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...t})}},376:(e,r,t)=>{Promise.resolve().then(t.bind(t,377))},377:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g,dynamic:()=>c});var s=t(113),a=t(121),n=t(378),i=t(379),l=t(255),o=t(382),d=t(383);let c="force-dynamic",m=[{id:1,name:"Shops",nameAr:"متاجر",nameFr:"Boutiques",icon:d.Store,color:"bg-gradient-to-br from-emerald-100 to-green-50",iconColor:"text-emerald-600"},{id:2,name:"Pharmacy & Beauty",nameAr:"صيدلية وتجميل",nameFr:"Pharmacie & Beaut\xe9",icon:d.Pill,color:"bg-gradient-to-br from-pink-100 to-rose-50",iconColor:"text-pink-500"},{id:3,name:"Groceries",nameAr:"بقالة",nameFr:"\xc9picerie",icon:d.ShoppingCart,color:"bg-gradient-to-br from-orange-100 to-amber-50",iconColor:"text-orange-500"},{id:4,name:"Food",nameAr:"طعام",nameFr:"Nourriture",icon:d.Pizza,color:"bg-gradient-to-br from-orange-100 to-yellow-50",iconColor:"text-orange-600"},{id:5,name:"Package Delivery",nameAr:"توصيل الطرود",nameFr:"Livraison de colis",icon:d.Bike,color:"bg-gradient-to-br from-yellow-100 to-amber-50",iconColor:"text-yellow-600"}],u=[{id:1,name:"Le Taj Mahal",type:"Cuisine Indienne",rating:4.5,deliveryTime:"30-45 min",categoryId:1},{id:2,name:"Supermarch\xe9 Numidis",type:"Supermarch\xe9",rating:4.7,deliveryTime:"20-30 min",categoryId:2},{id:3,name:"Pharmacie El Hakim",type:"Pharmacie",rating:4.8,deliveryTime:"15-25 min",categoryId:3},{id:4,name:"Pizza Napoli",type:"Pizzeria",rating:4.6,deliveryTime:"25-35 min",categoryId:1},{id:5,name:"Express Colis",type:"Livraison",rating:4.9,deliveryTime:"M\xeame jour",categoryId:4},{id:6,name:"Boutique Souvenirs",type:"Cadeaux & Artisanat",rating:4.4,deliveryTime:"40-50 min",categoryId:5}],x=[{id:1,storeId:1,name:"Poulet Tikka Masala",description:"Poulet marin\xe9 dans une sauce cr\xe9meuse aux \xe9pices",price:1200,image:"/chicken-tikka-masala.png",rating:4.5},{id:2,storeId:1,name:"Biryani aux L\xe9gumes",description:"Riz basmati parfum\xe9 avec l\xe9gumes et \xe9pices",price:900,image:"/vegetable-biryani.png",rating:4.7},{id:3,storeId:1,name:"Naan au Fromage",description:"Pain indien traditionnel garni de fromage",price:350,image:"/cheese-naan-bread.jpg",rating:4.8},{id:4,storeId:2,name:"Lait Candia 1L",description:"Lait demi-\xe9cr\xe9m\xe9 UHT",price:120,image:"/milk-carton.png",rating:4.6},{id:5,storeId:2,name:"Pain Complet",description:"Pain frais du jour",price:80,image:"/whole-wheat-bread.png",rating:4.9},{id:6,storeId:2,name:"Huile d'Olive 1L",description:"Huile d'olive extra vierge",price:650,image:"/olive-oil-bottle.png",rating:4.4},{id:7,storeId:4,name:"Pizza Margherita",description:"Tomate, mozzarella, basilic frais",price:1100,image:"/margherita-pizza.png",rating:4.8},{id:8,storeId:4,name:"Pizza 4 Fromages",description:"Mozzarella, gorgonzola, parmesan, ch\xe8vre",price:1300,image:"/four-cheese-pizza.png",rating:4.6},{id:9,storeId:4,name:"Pizza V\xe9g\xe9tarienne",description:"L\xe9gumes grill\xe9s, olives, champignons",price:1200,image:"/vegetarian-pizza.jpg",rating:4.7}];function g(){let e=(0,n.useRouter)(),{data:r,status:t}=(0,i.useSession)(),c=null==r?void 0:r.user,[g,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)("home"),[b]=(0,a.useState)("Tamanrasset"),[v,j]=(0,a.useState)(null),[N,y]=(0,a.useState)(null),[w,C]=(0,a.useState)([]),[k,S]=(0,a.useState)(""),[E,D]=(0,a.useState)(null),[I,T]=(0,a.useState)("cash"),[z,L]=(0,a.useState)("fr"),[P,B]=(0,a.useState)(!1),[R,V]=(0,a.useState)(null),A=(null==c?void 0:c.id)||"customer-1",M="tracking"===p&&!!E,{data:_}=(0,o.useSSE)("/api/notifications/sse?role=customer&userId=".concat(A),M);if((0,a.useEffect)(()=>{"unauthenticated"===t&&e.push("/login")},[t,e]),(0,a.useEffect)(()=>{var e;(null==_?void 0:_.type)==="order_updated"&&(null==(e=_.order)?void 0:e.id)===E&&(V(_.order),console.log("[v0] Order updated via SSE:",_.order))},[_,E]),(0,a.useEffect)(()=>{if(E&&"tracking"===p){let e=async()=>{try{let e=await fetch("/api/orders/".concat(E)),r=await e.json();r.success&&V(r.order)}catch(e){console.error("[v0] Error fetching order:",e)}};e();let r=setInterval(e,5e3);return()=>clearInterval(r)}},[E,p]),(0,a.useEffect)(()=>{if("loading"!==t){if("unauthenticated"===t)return void e.push("/login");if("authenticated"===t&&(null==c?void 0:c.role)&&"CUSTOMER"!==c.role){let r="ADMIN"===c.role?"/admin":"VENDOR"===c.role?"/vendor":"DRIVER"===c.role?"/driver":"/";e.push(r)}}},[t,c,e]),(0,a.useEffect)(()=>{g?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[g]),(0,a.useEffect)(()=>{document.documentElement.lang=z,document.documentElement.dir="ar"===z?"rtl":"ltr"},[z]),"loading"===t)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})});if("unauthenticated"===t)return null;let F=(e,r,t)=>"ar"===z?t:r,q=(e,r)=>{C(w.map(t=>t.productId===e?{...t,quantity:Math.max(0,t.quantity+r)}:t).filter(e=>e.quantity>0))},H=()=>w.reduce((e,r)=>{let t=x.find(e=>e.id===r.productId);return e+((null==t?void 0:t.price)||0)*r.quantity},0),O=w.reduce((e,r)=>e+r.quantity,0),Z=async()=>{if(0===w.length)return;let e=H(),r=w[0],t=x.find(e=>e.id===r.productId),s={customerId:A,storeId:(null==t?void 0:t.storeId)||1,items:w.map(e=>{let r=x.find(r=>r.id===e.productId);return{productId:e.productId,quantity:e.quantity,price:(null==r?void 0:r.price)||0}}),subtotal:e,deliveryFee:500,total:e+500,paymentMethod:I,deliveryAddress:"123 Rue Example, Appartement 4",city:b,customerPhone:"+213555000000"};try{let e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await e.json();r.success?(D(r.order.id),V(r.order),f("tracking"),C([]),console.log("[v0] Order placed successfully:",r.order.id)):(console.error("[v0] Failed to place order:",r.error),alert(F("order-error","Erreur lors de la commande. Veuillez r\xe9essayer.","خطأ في الطلب. يرجى المحاولة مرة أخرى.")))}catch(e){console.error("[v0] Error placing order:",e),alert(F("order-error","Erreur lors de la commande. Veuillez r\xe9essayer.","خطأ في الطلب. يرجى المحاولة مرة أخرى."))}},U=u.filter(e=>{let r=!v||e.categoryId===v,t=e.name.toLowerCase().includes(k.toLowerCase())||e.type.toLowerCase().includes(k.toLowerCase());return r&&t});return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(()=>(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-background border-b border-border shadow-sm",children:(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("button",{onClick:()=>{f("home"),j(null),y(null)},className:"flex items-center gap-2",children:(0,s.jsx)("img",{src:"/logo.png",alt:"ALBAZ FAST DELIVERY",className:"h-[84px] w-auto"})}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2 bg-muted rounded-lg px-3 py-2 max-w-xs",children:[(0,s.jsx)(d.MapPin,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:b})]}),(0,s.jsx)("button",{onClick:()=>h(!g),className:"p-2 rounded-lg hover:bg-muted transition-colors",children:g?(0,s.jsx)(d.Sun,{className:"w-5 h-5"}):(0,s.jsx)(d.Moon,{className:"w-5 h-5"})})]})})}),{}),(0,s.jsxs)("main",{children:["home"===p&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[(0,s.jsx)("div",{className:"px-4 py-4 bg-background sticky top-[57px] z-40 border-b border-border",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),(0,s.jsx)(l.Input,{type:"text",placeholder:F("search","D\xe9couvrir...","اكتشف..."),value:k,onChange:e=>S(e.target.value),className:"pl-10 bg-muted border-none rounded-lg h-11"})]})}),(0,s.jsx)("div",{className:"px-4 py-8 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-gray-800 dark:to-gray-900",children:(0,s.jsx)("div",{className:"grid grid-cols-3 gap-6 max-w-md mx-auto",children:m.map(r=>{let t="ar"===z?r.nameAr:r.nameFr,a=r.icon;return(0,s.jsxs)("button",{onClick:()=>{5===r.id?e.push("/package-delivery"):(j(r.id),f("category"))},className:"flex flex-col items-center gap-3 group",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full ".concat(r.color," dark:bg-gray-700 flex items-center justify-center shadow-[0_8px_16px_rgba(0,0,0,0.15)] group-hover:shadow-[0_12px_24px_rgba(0,0,0,0.2)] group-hover:scale-105 transition-all duration-300"),children:(0,s.jsx)(a,{className:"w-12 h-12 ".concat(r.iconColor," dark:text-gray-200 stroke-[2.5]")})}),(0,s.jsx)("span",{className:"text-sm font-semibold text-center text-gray-800 dark:text-gray-200 max-w-[90px]",children:t})]},r.id)})})}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-foreground",children:F("promotions","Promotions","العروض الترويجية")}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(l.Card,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow border-border",children:(0,s.jsxs)("div",{className:"relative h-40 bg-gradient-to-r from-primary to-orange-500",children:[(0,s.jsx)("img",{src:"/placeholder.jpg",alt:"Promotion",className:"w-full h-full object-cover opacity-80"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold mb-2",children:F("promo-title","Livraison Gratuite","توصيل مجاني")}),(0,s.jsx)("p",{className:"text-sm",children:F("promo-desc","Sur votre premi\xe8re commande","على طلبك الأول")})]})})]})}),(0,s.jsx)(l.Card,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow border-border",children:(0,s.jsxs)("div",{className:"relative h-40 bg-gradient-to-r from-green-400 to-emerald-500",children:[(0,s.jsx)("img",{src:"/placeholder.jpg",alt:"Promotion",className:"w-full h-full object-cover opacity-80"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold mb-2",children:F("discount","-20% R\xe9duction","خصم 20%-")}),(0,s.jsx)("p",{className:"text-sm",children:F("grocery-promo","Sur tous les produits d'\xe9picerie","على جميع منتجات البقالة")})]})})]})})]})]})]}),{}),"category"===p&&(0,s.jsx)(()=>{let e=m.find(e=>e.id===v);if(!e)return null;let r="ar"===z?e.nameAr:e.nameFr,t=e.icon;return(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[(0,s.jsx)("div",{className:"sticky top-[57px] z-40 bg-background border-b border-border px-4 py-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{f("home"),j(null)},className:"hover:bg-muted",children:(0,s.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"text-lg font-bold text-foreground",children:r})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-br ".concat(e.color," px-4 py-8 relative overflow-hidden"),children:[(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-1",children:r}),(0,s.jsx)("p",{className:"text-white/90 text-sm",children:F("fast-delivery","Livraison rapide \xe0 votre porte","توصيل سريع إلى بابك")})]}),(0,s.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 opacity-20",children:(0,s.jsx)(t,{className:"w-32 h-32 text-white"})})]}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-foreground",children:F("available-stores","Magasins disponibles","المتاجر المتاحة")}),(0,s.jsx)("div",{className:"space-y-4",children:U.map(e=>(0,s.jsxs)(l.Card,{className:"overflow-hidden cursor-pointer hover:shadow-md transition-shadow border-border",onClick:()=>{y(e.id),f("store")},children:[(0,s.jsxs)("div",{className:"relative h-40 bg-gradient-to-br from-muted to-muted/50",children:[(0,s.jsx)("img",{src:"/placeholder.jpg",alt:e.name,className:"w-full h-full object-cover"}),(0,s.jsx)(l.Badge,{className:"absolute top-2 left-2 bg-accent text-accent-foreground text-xs px-2 py-1",children:F("free","Gratuit","مجاني")})]}),(0,s.jsxs)(l.CardContent,{className:"p-3",children:[(0,s.jsx)("h3",{className:"font-bold text-base mb-1 text-foreground",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.rating,"%"]})]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Clock,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:e.deliveryTime})]})]})]})]},e.id))})]})]})},{}),"store"===p&&(0,s.jsx)(()=>{let e=u.find(e=>e.id===N),r=x.filter(e=>e.storeId===N),[t,n]=(0,a.useState)(null);if(!e)return null;if(t){let e=x.find(e=>e.id===t);return e?(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,s.jsx)("div",{className:"sticky top-0 z-50 bg-background border-b border-border px-4 py-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>n(null),className:"hover:bg-muted",children:(0,s.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",className:"hover:bg-muted",children:(0,s.jsx)(d.Star,{className:"w-5 h-5"})}),(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",className:"hover:bg-muted",children:(0,s.jsx)(d.Share2,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{className:"w-full aspect-square bg-background flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"w-full h-full max-w-md mx-auto rounded-full overflow-hidden shadow-xl",children:(0,s.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"px-4 py-6 space-y-6 bg-card rounded-t-3xl -mt-6 relative z-10 shadow-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground flex-1",children:e.name}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-primary",children:e.price}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground ml-1",children:"DZD"})]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((r,t)=>(0,s.jsx)(d.Star,{className:"w-5 h-5 ".concat(t<Math.floor(e.rating)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},t))})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut."}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 bg-muted rounded-full px-4 py-3",children:[(0,s.jsx)("button",{"aria-label":"Decrease quantity",className:"w-8 h-8 rounded-full bg-card flex items-center justify-center shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsx)(d.Minus,{className:"w-4 h-4 text-muted-foreground"})}),(0,s.jsx)("span",{className:"text-lg font-bold w-12 text-center text-foreground",children:"01"}),(0,s.jsx)("button",{"aria-label":"Increase quantity",className:"w-8 h-8 rounded-full bg-card flex items-center justify-center shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsx)(d.Plus,{className:"w-4 h-4 text-muted-foreground"})})]}),(0,s.jsx)(l.Button,{className:"flex-1 bg-gradient-to-r from-primary to-orange-500 hover:from-primary/90 hover:to-orange-500/90 text-primary-foreground font-bold py-6 rounded-full text-lg shadow-lg",onClick:()=>{var r;r=e.id,w.find(e=>e.productId===r)?C(w.map(e=>e.productId===r?{...e,quantity:e.quantity+1}:e)):C([...w,{productId:r,quantity:1}]),n(null)},children:F("add-to-cart","Ajouter au Panier","أضف إلى السلة")})]})]})]}):null}return(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-24",children:[(0,s.jsx)("div",{className:"sticky top-0 z-50 bg-background border-b border-border px-4 py-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{f("category"),y(null)},className:"hover:bg-muted",children:(0,s.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"text-lg font-bold text-foreground",children:e.name}),(0,s.jsx)("div",{className:"w-10"})]})}),(0,s.jsx)("div",{className:"bg-card p-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-xl bg-gradient-to-br from-primary/20 to-orange-500/20 flex items-center justify-center",children:(0,s.jsx)(d.UtensilsCrossed,{className:"w-10 h-10 text-primary"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.type}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.Star,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,s.jsx)("span",{className:"font-semibold text-foreground",children:e.rating})]}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"•"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:e.deliveryTime})]})]})]})}),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-foreground mb-4",children:F("menu","Menu","القائمة")}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:r.map(e=>(0,s.jsxs)(l.Card,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow border-border bg-card",onClick:()=>n(e.id),children:[(0,s.jsx)("div",{className:"aspect-square relative bg-muted flex items-center justify-center",children:(0,s.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)(l.CardContent,{className:"p-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm text-foreground mb-1 line-clamp-2",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:e.description}),(0,s.jsx)("div",{className:"flex items-center gap-1 mb-2",children:[void 0,void 0,void 0,void 0,void 0].map((r,t)=>(0,s.jsx)(d.Star,{className:"w-3 h-3 ".concat(t<Math.floor(e.rating)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},t))}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-primary",children:[e.price," DZD"]}),(0,s.jsx)(l.Button,{size:"sm",className:"bg-gradient-to-r from-primary to-orange-500 hover:from-primary/90 hover:to-orange-500/90 text-primary-foreground rounded-full px-4 text-xs",children:F("add","Ajouter","أضف")})]})]})]},e.id))})]})]})},{}),"checkout"===p&&(0,s.jsx)(()=>{let e=H(),r=e+500;return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 md:pb-6 max-w-3xl",children:[(0,s.jsxs)(l.Button,{variant:"ghost",onClick:()=>f("home"),className:"mb-4",children:["← ",F("continue-shopping","Continuer les achats","متابعة التسوق")]}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-foreground",children:F("my-cart","Mon Panier","سلتي")}),0===w.length?(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"p-12 text-center",children:[(0,s.jsx)(d.ShoppingCart,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:F("empty-cart","Votre panier est vide","سلتك فارغة")}),(0,s.jsx)(l.Button,{onClick:()=>f("home"),children:F("start-shopping","Commencer vos achats","ابدأ التسوق")})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-4 space-y-4",children:w.map(e=>{let r=x.find(r=>r.id===e.productId);return r?(0,s.jsxs)("div",{className:"flex items-center gap-4 pb-4 border-b last:border-0 last:pb-0",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-muted shrink-0",children:(0,s.jsx)("img",{src:r.image||"/placeholder.svg",alt:r.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold mb-1 truncate text-foreground",children:r.name}),(0,s.jsxs)("p",{className:"text-sm text-primary font-semibold",children:[r.price," DZD"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full bg-transparent border-primary text-primary hover:bg-primary hover:text-primary-foreground",onClick:()=>q(e.productId,-1),children:(0,s.jsx)(d.Minus,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"w-8 text-center font-semibold text-foreground",children:e.quantity}),(0,s.jsx)(l.Button,{size:"icon",className:"h-8 w-8 rounded-full",onClick:()=>q(e.productId,1),children:(0,s.jsx)(d.Plus,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"text-right shrink-0",children:[(0,s.jsxs)("p",{className:"font-bold whitespace-nowrap text-foreground",children:[r.price*e.quantity," DZD"]}),(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>{var r;return r=e.productId,void C(w.filter(e=>e.productId!==r))},className:"text-destructive hover:text-destructive h-auto p-1",children:(0,s.jsx)(d.Trash2,{className:"w-4 h-4"})})]})]},e.productId):null})})}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:F("order-summary","R\xe9sum\xe9 de la commande","ملخص الطلب")})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-muted-foreground",children:[(0,s.jsx)("span",{children:F("items-total","Total des articles","مجموع العناصر")}),(0,s.jsxs)("span",{children:[e," DZD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-muted-foreground",children:[(0,s.jsx)("span",{children:F("tax","Taxe","ضريبة")}),(0,s.jsx)("span",{children:"0 DZD"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-muted-foreground",children:[(0,s.jsx)("span",{children:F("delivery-fee","Frais de livraison","رسوم التوصيل")}),(0,s.jsxs)("span",{children:[500," DZD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xl font-bold pt-3 border-t",children:[(0,s.jsx)("span",{children:F("total","Total","المجموع")}),(0,s.jsxs)("span",{className:"text-primary",children:[r," DZD"]})]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:F("payment-method","Mode de paiement","طريقة الدفع")})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border-2 border-primary rounded-lg cursor-pointer bg-primary/5",children:[(0,s.jsx)("input",{type:"radio",name:"payment",value:"cash",checked:"cash"===I,onChange:e=>T(e.target.value),className:"w-4 h-4 text-primary"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("cash-on-delivery","Paiement \xe0 la Livraison","الدفع عند الاستلام")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F("pay-cash","Payez en esp\xe8ces lors de la r\xe9ception","ادفع نقدًا عند الاستلام")})]}),(0,s.jsx)(l.Badge,{className:"bg-primary text-primary-foreground",children:F("recommended","Recommand\xe9","موصى به")})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border-2 rounded-lg cursor-not-allowed opacity-50",children:[(0,s.jsx)("input",{type:"radio",name:"payment",value:"card",disabled:!0,className:"w-4 h-4"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("credit-card","Carte Bancaire","بطاقة ائتمان")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F("coming-soon","Bient\xf4t disponible","قريبًا")})]})]})]})]}),(0,s.jsxs)(l.Button,{size:"lg",className:"w-full text-lg rounded-full",onClick:Z,children:[F("pay-now","Payer Maintenant","ادفع الآن")," - ",r," DZD"]})]})]})},{}),"tracking"===p&&(0,s.jsx)(()=>{let e=R?(e=>{switch(e){case"pending":case"accepted":default:return 1;case"preparing":return 2;case"ready":case"assigned":case"IN_DELIVERY":return 3;case"DELIVERED":return 4}})(R.status):1,r=[{id:1,label:F("order-accepted","Commande Accept\xe9e","تم قبول الطلب"),icon:d.CheckCircle2,status:["pending","accepted"]},{id:2,label:F("preparing","En Pr\xe9paration","قيد التحضير"),icon:d.Package,status:["preparing"]},{id:3,label:F("in-delivery","En Livraison","قيد التوصيل"),icon:d.Truck,status:["ready","assigned","IN_DELIVERY"]},{id:4,label:F("delivered","Livr\xe9e","تم التوصيل"),icon:d.CheckCircle2,status:["DELIVERED"]}];return(0,s.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-2xl pb-24",children:(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(d.CheckCircle2,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)(l.CardTitle,{className:"text-2xl mb-2 text-foreground",children:(null==R?void 0:R.status)==="DELIVERED"?F("order-delivered","Commande Livr\xe9e!","تم توصيل الطلب!"):F("order-confirmed","Commande Confirm\xe9e!","تم تأكيد الطلب!")}),(0,s.jsxs)(l.CardDescription,{className:"text-base",children:[F("order-number","Num\xe9ro de commande","رقم الطلب"),":"," ",(0,s.jsx)("span",{className:"font-mono font-semibold",children:E})]})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-8",children:[R&&(0,s.jsx)("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 text-center",children:(0,s.jsx)("p",{className:"text-sm font-semibold text-primary",children:(e=>{switch(e){case"pending":return F("status-pending","En attente d'acceptation par le restaurant","في انتظار قبول المطعم");case"accepted":return F("status-accepted","Commande accept\xe9e par le restaurant","تم قبول الطلب من قبل المطعم");case"preparing":return F("status-preparing","Votre commande est en cours de pr\xe9paration","طلبك قيد التحضير");case"ready":return F("status-ready","Commande pr\xeate, en attente d'un livreur","الطلب جاهز، في انتظار السائق");case"assigned":return F("status-assigned","Un livreur a \xe9t\xe9 assign\xe9 \xe0 votre commande","تم تعيين سائق لطلبك");case"IN_DELIVERY":return F("status-in-delivery","Votre commande est en cours de livraison","طلبك قيد التوصيل");case"DELIVERED":return F("status-delivered","Commande livr\xe9e avec succ\xe8s","تم توصيل الطلب بنجاح");default:return F("status-unknown","Statut inconnu","حالة غير معروفة")}})(R.status)})}),(0,s.jsx)("div",{className:"space-y-6",children:r.map((t,a)=>{let n=t.icon,i=e>=t.id,l=e===t.id,o=a===r.length-1;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all ".concat(i?"bg-primary text-primary-foreground scale-110":"bg-muted text-muted-foreground"," ").concat(l?"ring-4 ring-primary/20":""),children:(0,s.jsx)(n,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-semibold ".concat(i?"text-foreground":"text-muted-foreground"," ").concat(l?"text-primary":""),children:t.label}),l&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:F("in-progress","En cours...","جاري...")})]})]}),!o&&(0,s.jsx)("div",{className:"absolute left-6 top-12 w-0.5 h-6 transition-all ".concat(i?"bg-primary":"bg-border")})]},t.id)})}),R&&(0,s.jsxs)("div",{className:"bg-muted rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3 text-foreground",children:F("order-details","D\xe9tails de la commande","تفاصيل الطلب")}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:F("total","Total","المجموع")}),(0,s.jsxs)("span",{className:"font-semibold text-foreground",children:[R.total," DZD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:F("payment","Paiement","الدفع")}),(0,s.jsx)("span",{className:"font-semibold text-foreground",children:"cash"===R.paymentMethod?F("cash","Esp\xe8ces","نقدي"):F("card","Carte","بطاقة")})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:F("delivery","Livraison","التوصيل")}),(0,s.jsx)("span",{className:"font-semibold text-foreground",children:R.city})]})]})]}),(null==R?void 0:R.status)==="DELIVERED"?(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 text-center",children:[(0,s.jsx)(d.CheckCircle2,{className:"w-12 h-12 mx-auto mb-3 text-green-600 dark:text-green-400"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-green-900 dark:text-green-100 mb-2",children:F("thank-you","Merci pour votre commande!","شكرا لطلبك!")}),(0,s.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:F("see-you-soon","Nous esp\xe9rons vous revoir bient\xf4t.","نأمل أن نراك قريبًا.")})]}):(0,s.jsxs)("div",{className:"bg-muted rounded-lg p-6 text-center",children:[(0,s.jsx)("p",{className:"text-lg font-semibold mb-2 text-foreground",children:F("thank-you","Merci pour votre commande!","شكرا لطلبك!")}),(0,s.jsx)("p",{className:"text-muted-foreground",children:F("delivery-message","Votre commande sera livr\xe9e dans les plus brefs d\xe9lais. Vous pouvez payer en esp\xe8ces \xe0 la livraison.","سيتم توصيل طلبك في أقرب وقت ممكن. يمكنك الدفع نقدًا عند الاستلام.")})]}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsx)(l.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:()=>{f("home"),D(null),V(null)},children:F("back-home","Retour \xe0 l'accueil","العودة إلى الصفحة الرئيسية")})})]})]})})},{}),"orders"===p&&(0,s.jsx)(()=>{let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)("orders");return(0,a.useEffect)(()=>{(async()=>{o(!0);try{let e=await fetch("/api/orders?customerId=".concat(A)),t=await e.json();if(t.success){let e=t.orders||[];n(e.filter(e=>!e.isPackageDelivery)),r(e.filter(e=>e.isPackageDelivery))}}catch(e){console.error("[v0] Error fetching orders:",e)}finally{o(!1)}})()},[A]),(0,s.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[(0,s.jsx)("div",{className:"sticky top-[57px] z-40 bg-background border-b border-border px-4 py-4 shadow-sm",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>f("home"),className:"hover:bg-muted",children:(0,s.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"text-lg font-bold text-foreground",children:F("my-orders","Mes Commandes","طلباتي")})]})}),(0,s.jsxs)("div",{className:"sticky top-[105px] z-30 bg-background border-b border-border px-4 py-3 flex gap-2 overflow-x-auto",children:[(0,s.jsx)("button",{onClick:()=>m("orders"),className:"px-4 py-2 rounded-full whitespace-nowrap font-medium transition-colors ".concat("orders"===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"),children:F("orders","Commandes","الطلبات")}),(0,s.jsx)("button",{onClick:()=>m("packages"),className:"px-4 py-2 rounded-full whitespace-nowrap font-medium transition-colors ".concat("packages"===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"),children:F("my-packages","Mes Colis","حزمي")}),(0,s.jsx)("button",{onClick:()=>m("track"),className:"px-4 py-2 rounded-full whitespace-nowrap font-medium transition-colors ".concat("track"===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"),children:F("track-order","Suivre Commande","تتبع الطلب")})]}),(0,s.jsxs)("div",{className:"px-4 py-6",children:["orders"===c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-foreground",children:F("orders","Commandes","الطلبات")}),0===t.length?(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"p-8 text-center",children:[(0,s.jsx)(d.ShoppingCart,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:F("no-orders","Aucune commande","لا توجد طلبات")})]})}):(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,s.jsx)(l.Card,{className:"border-border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{D(e.id),V(e),f("tracking")},children:(0,s.jsx)(l.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(l.Badge,{className:"DELIVERED"===e.status?"bg-green-500":"IN_DELIVERY"===e.status?"bg-blue-500":"bg-yellow-500",children:"DELIVERED"===e.status?F("delivered","Livr\xe9e","تم التوصيل"):"IN_DELIVERY"===e.status?F("in-delivery","En Livraison","قيد التوصيل"):F("pending","En Attente","قيد الانتظار")}),(0,s.jsxs)("span",{className:"text-sm font-mono text-muted-foreground",children:["#",e.id]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-bold text-primary",children:[e.total," DZD"]})})]})})},e.id))})]}),"packages"===c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-foreground",children:F("my-packages","Mes Colis","حزمي")}),0===e.length?(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"p-8 text-center",children:[(0,s.jsx)(d.Package,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:F("no-packages","Aucun colis","لا توجد حزم")})]})}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)(l.Card,{className:"border-border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{D(e.id),V(e),f("tracking")},children:(0,s.jsx)(l.CardContent,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(l.Badge,{className:"DELIVERED"===e.status?"bg-green-500":"IN_DELIVERY"===e.status?"bg-blue-500":"bg-yellow-500",children:"DELIVERED"===e.status?F("delivered","Livr\xe9e","تم التوصيل"):"IN_DELIVERY"===e.status?F("in-delivery","En Livraison","قيد التوصيل"):F("pending","En Attente","قيد الانتظار")}),(0,s.jsxs)("span",{className:"text-sm font-mono text-muted-foreground",children:["#",e.id]})]}),(0,s.jsx)("p",{className:"font-semibold text-foreground mb-1",children:e.packageDescription}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[F("to","Vers","إلى"),": ",e.recipientName]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-bold text-primary",children:[e.total," DZD"]})})]})})},e.id))})]}),"track"===c&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-foreground",children:F("track-order","Suivre Commande","تتبع الطلب")}),(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground mb-2 block",children:F("enter-order-id","Entrez le num\xe9ro de commande","أدخل رقم الطلب")}),(0,s.jsx)(l.Input,{type:"text",placeholder:F("order-id-placeholder","Ex: ORD-123456","مثال: ORD-123456"),className:"bg-muted border-border"})]}),(0,s.jsx)(l.Button,{className:"w-full bg-gradient-to-r from-primary to-orange-500 hover:from-primary/90 hover:to-orange-500/90 text-primary-foreground font-bold py-6 rounded-full",children:F("track","Suivre","تتبع")})]})})})]})]})]})},{}),"profile"===p&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 max-w-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>f("home"),className:"hover:bg-muted",children:(0,s.jsx)(d.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:F("profile","Profil","الملف الشخصي")})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(l.Card,{children:(0,s.jsxs)(l.CardContent,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-orange-500 flex items-center justify-center",children:(0,s.jsx)(d.User,{className:"w-10 h-10 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-foreground",children:(null==c?void 0:c.name)||F("user","Utilisateur","مستخدم")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:null==c?void 0:c.email})]})]}),(0,s.jsx)(l.Button,{variant:"outline",className:"w-full bg-transparent",children:F("edit-profile","Modifier le profil","تعديل الملف الشخصي")})]})}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:F("settings","Param\xe8tres","الإعدادات")})}),(0,s.jsxs)(l.CardContent,{className:"space-y-1",children:[(0,s.jsxs)("button",{onClick:()=>B(!P),className:"w-full flex items-center justify-between p-4 hover:bg-muted rounded-lg transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Globe,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("language","Langue","اللغة")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"fr"===z?"Fran\xe7ais":"ar"===z?"العربية":"English"})]})]}),(0,s.jsx)(d.ChevronRight,{className:"w-5 h-5 text-muted-foreground"})]}),P&&(0,s.jsxs)("div",{className:"ml-12 space-y-1 pb-2",children:[(0,s.jsx)("button",{onClick:()=>{L("fr"),B(!1)},className:"w-full text-left px-4 py-2 rounded-lg transition-colors ".concat("fr"===z?"bg-primary/10 text-primary font-semibold":"hover:bg-muted"),children:"Fran\xe7ais"}),(0,s.jsx)("button",{onClick:()=>{L("ar"),B(!1)},className:"w-full text-left px-4 py-2 rounded-lg transition-colors ".concat("ar"===z?"bg-primary/10 text-primary font-semibold":"hover:bg-muted"),children:"العربية"})]}),(0,s.jsxs)("button",{className:"w-full flex items-center justify-between p-4 hover:bg-muted rounded-lg transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Bell,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("notifications","Notifications","الإشعارات")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F("manage-notifications","G\xe9rer les notifications","إدارة الإشعارات")})]})]}),(0,s.jsx)(d.ChevronRight,{className:"w-5 h-5 text-muted-foreground"})]}),(0,s.jsxs)("button",{className:"w-full flex items-center justify-between p-4 hover:bg-muted rounded-lg transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.MapPin,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("addresses","Adresses","العناوين")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F("manage-addresses","G\xe9rer vos adresses","إدارة عناوينك")})]})]}),(0,s.jsx)(d.ChevronRight,{className:"w-5 h-5 text-muted-foreground"})]}),(0,s.jsxs)("button",{className:"w-full flex items-center justify-between p-4 hover:bg-muted rounded-lg transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.HelpCircle,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-foreground",children:F("help","Aide & Support","المساعدة والدعم")}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:F("faq","FAQ et contact","الأسئلة الشائعة والاتصال")})]})]}),(0,s.jsx)(d.ChevronRight,{className:"w-5 h-5 text-muted-foreground"})]})]})]}),(0,s.jsxs)(l.Button,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50 dark:hover:bg-red-900/20 bg-transparent",onClick:()=>(0,i.signOut)({callbackUrl:"/login"}),children:[(0,s.jsx)(d.LogOut,{className:"w-5 h-5 mr-2"}),F("logout","Se d\xe9connecter","تسجيل الخروج")]})]})]}),{})]}),(0,s.jsx)(()=>(0,s.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background border-t border-border safe-area-bottom shadow-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-around py-2 px-4",children:[(0,s.jsxs)("button",{onClick:()=>{f("home"),j(null),y(null)},className:"flex flex-col items-center gap-1 py-1 transition-colors ".concat("home"===p?"text-primary":"text-muted-foreground"),children:[(0,s.jsx)(d.Home,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:F("home","Accueil","الرئيسية")})]}),(0,s.jsxs)("button",{onClick:()=>f("checkout"),className:"flex flex-col items-center gap-1 py-1 transition-colors relative ".concat("checkout"===p?"text-primary":"text-muted-foreground"),children:[(0,s.jsx)(d.ShoppingCart,{className:"w-6 h-6"}),O>0&&(0,s.jsx)("span",{className:"absolute -top-1 right-2 bg-primary text-primary-foreground text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:O}),(0,s.jsx)("span",{className:"text-xs font-medium",children:F("cart","Panier","السلة")})]}),(0,s.jsxs)("button",{onClick:()=>f("orders"),className:"flex flex-col items-center gap-1 py-1 transition-colors ".concat("orders"===p?"text-primary":"text-muted-foreground"),children:[(0,s.jsx)(d.Package,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:F("orders","Commandes","الطلبات")})]}),(0,s.jsxs)("button",{onClick:()=>f("profile"),className:"flex flex-col items-center gap-1 py-1 transition-colors ".concat("profile"===p?"text-primary":"text-muted-foreground"),children:[(0,s.jsx)(d.User,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:F("profile","Profil","الملف الشخصي")})]})]})}),{})]})}},382:(e,r,t)=>{"use strict";t.r(r),t.d(r,{useSSE:()=>a});var s=t(121);function a(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[t,a]=(0,s.useState)(null),[n,i]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),d=(0,s.useRef)(null),c=(0,s.useRef)(null),m=(0,s.useRef)(0),u=(0,s.useRef)(null),[x,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!r)return;let t=()=>{if(m.current>=3){console.log("[v0] SSE failed multiple times, switching to polling fallback"),g(!0),i(null);return}d.current&&(d.current.close(),d.current=null);try{console.log("[v0] SSE connecting to:",e);let r=new EventSource(e);d.current=r,r.onopen=()=>{o(!0),i(null),m.current=0,console.log("[v0] SSE connection opened")},r.onmessage=e=>{try{let r=JSON.parse(e.data);a(r),console.log("[v0] SSE message received:",r.type)}catch(e){console.error("[v0] Error parsing SSE data:",e)}},r.onerror=e=>{if(console.error("[v0] SSE error, readyState:",r.readyState),o(!1),r.readyState===EventSource.CLOSED)if(console.log("[v0] SSE connection closed"),r.close(),m.current<3){let e=Math.min(1e3*Math.pow(2,m.current),1e4);m.current++,console.log("[v0] Reconnecting in ".concat(e,"ms (attempt ").concat(m.current,")")),c.current=setTimeout(()=>{t()},e)}else console.log("[v0] Max reconnection attempts reached, switching to polling"),g(!0)}}catch(e){console.error("[v0] Error creating EventSource:",e),i(e),o(!1),g(!0)}};return x||t(),()=>{console.log("[v0] SSE cleanup"),c.current&&(clearTimeout(c.current),c.current=null),u.current&&(clearInterval(u.current),u.current=null),d.current&&(d.current.close(),d.current=null,o(!1),console.log("[v0] SSE connection closed"))}},[e,r,x]),{data:t,error:n,isConnected:l||x}}},383:(e,r,t)=>{"use strict";t.r(r),t.d(r,{ArrowLeft:()=>s.default,Bell:()=>a.default,Bike:()=>n.default,CheckCircle2:()=>i.default,ChevronRight:()=>l.default,Clock:()=>o.default,Globe:()=>d.default,HelpCircle:()=>c.default,Home:()=>m.default,LogOut:()=>u.default,MapPin:()=>x.default,Minus:()=>g.default,Moon:()=>h.default,Package:()=>p.default,Pill:()=>f.default,Pizza:()=>b.default,Plus:()=>v.default,Search:()=>j.default,Share2:()=>N.default,ShoppingCart:()=>y.default,Star:()=>w.default,Store:()=>C.default,Sun:()=>k.default,Trash2:()=>S.default,Truck:()=>E.default,User:()=>D.default,UtensilsCrossed:()=>I.default});var s=t(384),a=t(385),n=t(386),i=t(387),l=t(388),o=t(389),d=t(390),c=t(391),m=t(392),u=t(393),x=t(394),g=t(395),h=t(396),p=t(397),f=t(398),b=t(399),v=t(400),j=t(401),N=t(402),y=t(403),w=t(404),C=t(405),k=t(406),S=t(407),E=t(408),D=t(409),I=t(410)}},e=>{e.O(0,[96,569,587,358],()=>e(e.s=376)),_N_E=e.O()}]);