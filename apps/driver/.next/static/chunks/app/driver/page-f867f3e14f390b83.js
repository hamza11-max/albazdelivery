(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{"(app-pages-browser)/../../lib/constants.ts":(e,s,a)=>{"use strict";a.r(s),a.d(s,{ALGERIAN_CITIES:()=>B,ALGERIAN_PHONE_REGEX:()=>_,ALLOWED_IMAGE_TYPES:()=>O,AUTO_ASSIGNMENT_TIMEOUT_MINUTES:()=>v,BRONZE_TIER_POINTS:()=>m,CACHE_TTL_PRODUCTS:()=>b,CACHE_TTL_SESSION:()=>y,CACHE_TTL_STORES:()=>C,DEFAULT_DELIVERY_FEE:()=>r,DEFAULT_PAGE:()=>R,DEFAULT_PAGE_SIZE:()=>D,DRIVER_LOCATION_UPDATE_INTERVAL:()=>N,FREE_DELIVERY_THRESHOLD:()=>l,GOLD_TIER_POINTS:()=>p,LOYALTY_POINTS_RATE:()=>x,MAX_CART_VALUE:()=>o,MAX_DELIVERY_DISTANCE_KM:()=>j,MAX_DELIVERY_FEE:()=>i,MAX_DESCRIPTION_LENGTH:()=>T,MAX_DRIVER_CONCURRENT_ORDERS:()=>f,MAX_FILE_SIZE:()=>L,MAX_IMAGES_PER_PRODUCT:()=>k,MAX_NOTIFICATIONS:()=>P,MAX_ORDER_ITEMS:()=>c,MAX_PAGE_SIZE:()=>I,MAX_USERNAME_LENGTH:()=>A,MIN_ORDER_VALUE:()=>d,MIN_PASSWORD_LENGTH:()=>S,NOTIFICATION_TIMEOUT:()=>M,ORDER_POLLING_INTERVAL:()=>w,OrderStatus:()=>t,PLATINUM_TIER_POINTS:()=>h,REFERRAL_BONUS_POINTS:()=>g,SILVER_TIER_POINTS:()=>u,SSE_RECONNECT_DELAY:()=>E,TAX_RATE:()=>n});let t={PENDING:"PENDING",ACCEPTED:"ACCEPTED",PREPARING:"PREPARING",READY:"READY",ASSIGNED:"ASSIGNED",IN_DELIVERY:"IN_DELIVERY",DELIVERED:"DELIVERED",CANCELLED:"CANCELLED"},r=500,l=3e3,i=1e3,n=0,c=50,o=1e5,d=200,x=.05,m=0,u=1e3,p=5e3,h=1e4,g=500,j=20,N=5e3,v=10,f=3,b=300,C=600,y=3600,E=3e3,w=5e3,_=/^(0|\+213)[567]\d{8}$/,S=8,A=50,T=500,D=20,I=100,R=1,L=5242880,O=["image/jpeg","image/png","image/webp"],k=5,P=50,M=5e3,B=["Alger","Oran","Constantine","Annaba","Blida","Batna","Djelfa","S\xe9tif","Sidi Bel Abb\xe8s","Biskra","T\xe9bessa","El Oued","Skikda","Tiaret","B\xe9ja\xefa","Tlemcen","Ouargla","Gharda\xefa","Tamanrasset"]},"(app-pages-browser)/../../lib/use-sse.ts":(e,s,a)=>{"use strict";a.r(s),a.d(s,{useSSE:()=>r});var t=a("(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js");function r(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[a,r]=(0,t.useState)(null),[l,i]=(0,t.useState)(null),[n,c]=(0,t.useState)(!1),o=(0,t.useRef)(null),d=(0,t.useRef)(null),x=(0,t.useRef)(0),m=(0,t.useRef)(null),[u,p]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{if(!s)return;let a=()=>{if(x.current>=3){console.log("[v0] SSE failed multiple times, switching to polling fallback"),p(!0),i(null);return}o.current&&(o.current.close(),o.current=null);try{console.log("[v0] SSE connecting to:",e);let s=new EventSource(e);o.current=s,s.onopen=()=>{c(!0),i(null),x.current=0,console.log("[v0] SSE connection opened")},s.onmessage=e=>{try{let s=JSON.parse(e.data);r(s),console.log("[v0] SSE message received:",s.type)}catch(e){console.error("[v0] Error parsing SSE data:",e)}},s.onerror=e=>{if(console.error("[v0] SSE error, readyState:",s.readyState),c(!1),s.readyState===EventSource.CLOSED)if(console.log("[v0] SSE connection closed"),s.close(),x.current<3){let e=Math.min(1e3*Math.pow(2,x.current),1e4);x.current++,console.log("[v0] Reconnecting in ".concat(e,"ms (attempt ").concat(x.current,")")),d.current=setTimeout(()=>{a()},e)}else console.log("[v0] Max reconnection attempts reached, switching to polling"),p(!0)}}catch(e){console.error("[v0] Error creating EventSource:",e),i(e),c(!1),p(!0)}};return u||a(),()=>{console.log("[v0] SSE cleanup"),d.current&&(clearTimeout(d.current),d.current=null),m.current&&(clearInterval(m.current),m.current=null),o.current&&(o.current.close(),o.current=null,c(!1),console.log("[v0] SSE connection closed"))}},[e,s,u]),{data:a,error:l,isConnected:n||u}}},"(app-pages-browser)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22E%3A%5C%5Cnn%5C%5Calbazdelivery%5C%5Capps%5C%5Cdriver%5C%5Capp%5C%5Cdriver%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":(e,s,a)=>{Promise.resolve().then(a.bind(a,"(app-pages-browser)/./app/driver/page.tsx"))},"(app-pages-browser)/./app/driver/page.tsx":(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u,dynamic:()=>m});var t=a("(app-pages-browser)/../../node_modules/next/dist/compiled/react/jsx-runtime.js"),r=a("(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js"),l=a("(app-pages-browser)/../../lib/constants.ts"),i=a("(app-pages-browser)/../../node_modules/next/dist/api/navigation.js"),n=a("(app-pages-browser)/../../packages/ui/src/index.ts"),c=a("(app-pages-browser)/__barrel_optimize__?names=AlertCircle,ArrowLeft,CheckCircle2,Clock,DollarSign,Globe,Home,List,LogOut,MapPin,Moon,Navigation,Package,Phone,RefreshCw,Sun,TrendingUp,Truck!=!../../node_modules/lucide-react/dist/esm/lucide-react.js"),o=a("(app-pages-browser)/../../lib/use-sse.ts"),d=a("(app-pages-browser)/../../hooks/use-toast.ts"),x=a("(app-pages-browser)/../../node_modules/next-auth/react.js");let m="force-dynamic";function u(){var e,s,a;let m=(0,i.useRouter)(),[u,p]=(0,r.useState)("fr"),[h,g]=(0,r.useState)("dashboard"),[j,N]=(0,r.useState)([]),[v,f]=(0,r.useState)(null),[b,C]=(0,r.useState)([]),[y,E]=(0,r.useState)(!1),[w]=(0,r.useState)("driver-1"),{toast:_}=(0,d.useToast)(),[S,A]=(0,r.useState)(!1),[T,D]=(0,r.useState)(null),[I,R]=(0,r.useState)(!1),L=(0,x.useSession)(),O=null!=(e=null==L?void 0:L.data)?e:null,k=null!=(s=null==L?void 0:L.status)?s:"loading",P=null!=(a=null==O?void 0:O.user)?a:null,M="authenticated"===k,{data:B,isConnected:G}=(0,o.useSSE)("/api/notifications/sse?role=driver&userId=".concat(w),!1);(0,r.useEffect)(()=>{"loading"!==k&&(M&&(null==P?void 0:P.role)==="DRIVER"||m.push("/login"))},[k,M,P,m]),(0,r.useEffect)(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]),(0,r.useEffect)(()=>{if((null==B?void 0:B.type)==="order_ready"){var e;V(),_({title:"Nouvelle Livraison Disponible!",description:"Commande #".concat(null==(e=B.order)?void 0:e.id," pr\xeate pour r\xe9cup\xe9ration"),duration:5e3})}},[B]);let V=async()=>{E(!0);try{var e;let s=await fetch("/api/drivers/deliveries?available=true"),a=await s.json();console.log("[Driver] Available deliveries:",a),a.success&&(null==(e=a.data)?void 0:e.deliveries)?N(a.data.deliveries):N([])}catch(e){console.error("[Driver] Error fetching deliveries:",e),N([])}finally{E(!1)}},U=async()=>{try{var e;let s=await fetch("/api/drivers/deliveries"),a=await s.json();if(console.log("[Driver] Fetched deliveries:",a),a.success&&(null==(e=a.data)?void 0:e.deliveries)){let e=a.data.deliveries,s=e.find(e=>e.status===l.OrderStatus.ASSIGNED||e.status===l.OrderStatus.IN_DELIVERY);f(s||null);let t=e.filter(e=>e.status===l.OrderStatus.DELIVERED);C(t)}else f(null),C([])}catch(e){console.error("[Driver] Error fetching active delivery:",e),f(null),C([])}},H=async e=>{try{let s=await fetch("/api/drivers/deliveries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e})}),a=await s.json();a.success&&(f(a.order),g("active"),V())}catch(e){console.error("[v0] Error accepting delivery:",e)}},z=async(e,s)=>{try{let a=await fetch("/api/drivers/deliveries/".concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,driverId:w})}),t=await a.json();t.success&&("delivered"===s?(f(null),g("dashboard"),V(),U()):f(t.order))}catch(e){console.error("[v0] Error updating delivery status:",e)}};return(0,r.useEffect)(()=>{let e=(()=>{if(!navigator.geolocation)return void _({title:"Erreur",description:"La g\xe9olocalisation n'est pas disponible",variant:"destructive"});R(!0),navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:a,accuracy:t,heading:r,speed:l}=e.coords;D({lat:s,lng:a}),fetch("/api/driver/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driverId:w,latitude:s,longitude:a,accuracy:t,heading:r||0,speed:l||0})}).catch(e=>console.error("[v0] Error sending location:",e))},e=>{console.error("[v0] Geolocation error:",e),_({title:"Erreur de g\xe9olocalisation",description:"Impossible d'acc\xe9der \xe0 votre position",variant:"destructive"})});let e=navigator.geolocation.watchPosition(e=>{let{latitude:s,longitude:a,accuracy:t,heading:r,speed:l}=e.coords;D({lat:s,lng:a}),fetch("/api/driver/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driverId:w,latitude:s,longitude:a,accuracy:t,heading:r||0,speed:l||0})}).catch(e=>console.error("[v0] Error sending location:",e))},e=>console.error("[v0] Watch position error:",e),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0});return()=>{navigator.geolocation.clearWatch(e),R(!1)}})();V(),U();let s=setInterval(()=>{V(),U()},5e3);return()=>{e&&e(),clearInterval(s)}},[w]),(0,t.jsxs)("div",{className:"min-h-screen bg-background ".concat(S?"dark":""),children:[(0,t.jsx)(()=>(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-primary to-orange-500 text-white shadow-lg",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:"/logo.png",alt:"AL-baz",className:"h-10 w-auto"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold",children:"ar"===u?"سائق AL-baz":"AL-baz Driver"}),(0,t.jsx)("p",{className:"text-xs text-white/80",children:(null==P?void 0:P.name)||"Driver"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>p("fr"===u?"ar":"fr"),title:"fr"===u?"العربية":"Fran\xe7ais",children:(0,t.jsx)(c.Globe,{className:"w-5 h-5"})}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>A(!S),children:S?(0,t.jsx)(c.Sun,{className:"w-5 h-5"}):(0,t.jsx)(c.Moon,{className:"w-5 h-5"})}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>{V(),U()},children:(0,t.jsx)(c.RefreshCw,{className:"w-5 h-5 ".concat(y?"animate-spin":"")})}),(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>(0,x.signOut)({callbackUrl:"/login"}),children:(0,t.jsx)(c.LogOut,{className:"w-5 h-5"})})]})]})})}),{}),(0,t.jsxs)("main",{children:["dashboard"===h&&(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:(0,t.jsx)(c.CheckCircle2,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-green-900",children:b.length}),(0,t.jsx)("p",{className:"text-xs text-green-700",children:"Livraisons"})]})]})})}),(0,t.jsx)(n.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:(0,t.jsx)(c.DollarSign,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:500*b.length}),(0,t.jsx)("p",{className:"text-xs text-blue-700",children:"DZD Gagn\xe9s"})]})]})})})]}),v&&(0,t.jsx)(n.Card,{className:"border-primary bg-primary/5",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.AlertCircle,{className:"w-6 h-6 text-primary"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"Livraison en cours"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Commande #",v.id]})]}),(0,t.jsx)(n.Button,{size:"sm",onClick:()=>g("active"),children:"Voir"})]})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Livraisons Disponibles"}),(0,t.jsxs)(n.Badge,{variant:"secondary",children:[j.length," disponible(s)"]})]}),0===j.length?(0,t.jsx)(n.Card,{children:(0,t.jsxs)(n.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(c.Package,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-lg text-gray-600 mb-2",children:"Aucune livraison disponible"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"V\xe9rifiez \xe0 nouveau dans quelques instants"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,t.jsx)(n.Card,{className:"border-gray-200 hover:shadow-lg transition-shadow",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(n.Badge,{className:"bg-green-500",children:"Pr\xeat"}),(0,t.jsxs)("span",{className:"text-sm font-mono text-gray-600",children:["#",e.id]})]}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["Commande de ",e.total," DZD"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.items.length," article(s)"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-primary",children:"500 DZD"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Frais de livraison"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 border-t pt-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(c.Package,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"R\xe9cup\xe9ration"}),(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Store #",e.storeId]})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(c.MapPin,{className:"w-4 h-4 text-primary mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Livraison"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.deliveryAddress}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.city})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(c.Phone,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Client"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customerPhone})]})]})]}),(0,t.jsx)("div",{className:"flex gap-2 pt-2",children:(0,t.jsxs)(n.Button,{className:"flex-1 bg-gradient-to-r from-primary to-orange-500",onClick:()=>H(e.id),disabled:!!v,children:[(0,t.jsx)(c.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Accepter"]})})]})})},e.id))})]})]}),{}),"active"===h&&(0,t.jsx)(()=>{if(!v)return(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsx)(n.Card,{children:(0,t.jsxs)(n.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(c.Package,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Aucune livraison active"})]})})});let e=v.status===l.OrderStatus.IN_DELIVERY;return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,t.jsx)(n.Card,{className:"border-primary bg-gradient-to-br from-primary/5 to-orange-500/5",children:(0,t.jsx)(n.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary mx-auto flex items-center justify-center",children:(0,t.jsx)(c.Truck,{className:"w-8 h-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Commande"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["#",v.id]})]}),(0,t.jsx)(n.Badge,{className:e?"bg-blue-500":"bg-green-500",children:e?"En Livraison":"Assign\xe9"})]})})}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"D\xe9tails de la Commande"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Commande"}),(0,t.jsxs)("span",{className:"font-bold text-gray-900",children:[v.total," DZD"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Articles"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:v.items.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Paiement"}),(0,t.jsx)(n.Badge,{variant:"outline",children:"cash"===v.paymentMethod?"Esp\xe8ces":"Carte"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Vos Frais"}),(0,t.jsx)("span",{className:"font-bold text-primary text-xl",children:"500 DZD"})]})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Package,{className:"w-5 h-5 text-primary"}),"Point de R\xe9cup\xe9ration"]})}),(0,t.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["Store #",v.storeId]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["123 Rue Didouche Mourad, ",v.city]})]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"w-full bg-transparent",children:[(0,t.jsx)(c.Navigation,{className:"w-4 h-4 mr-2"}),"Naviguer vers le magasin"]})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(c.MapPin,{className:"w-5 h-5 text-primary"}),"Adresse de Livraison"]})}),(0,t.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:v.deliveryAddress}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:v.city})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(c.Phone,{className:"w-4 h-4 text-gray-600"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Contact Client"}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:v.customerPhone})]}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",children:"Appeler"})]}),(0,t.jsxs)(n.Button,{variant:"outline",className:"w-full bg-transparent",children:[(0,t.jsx)(c.Navigation,{className:"w-4 h-4 mr-2"}),"Naviguer vers le client"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[e?(0,t.jsxs)(n.Button,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-lg",onClick:()=>z(v.id,"delivered"),children:[(0,t.jsx)(c.CheckCircle2,{className:"w-5 h-5 mr-2"}),"Marquer comme Livr\xe9e"]}):(0,t.jsxs)(n.Button,{size:"lg",className:"w-full bg-gradient-to-r from-primary to-orange-500 text-lg",onClick:()=>z(v.id,"in_delivery"),children:[(0,t.jsx)(c.CheckCircle2,{className:"w-5 h-5 mr-2"}),"Commande R\xe9cup\xe9r\xe9e"]}),(0,t.jsxs)(n.Button,{variant:"outline",size:"lg",className:"w-full bg-transparent",onClick:()=>g("dashboard"),children:[(0,t.jsx)(c.ArrowLeft,{className:"w-5 h-5 mr-2"}),"Retour au Tableau de Bord"]})]})]})},{}),"history"===h&&(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Historique"}),(0,t.jsxs)(n.Badge,{variant:"secondary",children:[b.length," livraison(s)"]})]}),(0,t.jsx)(n.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,t.jsx)(n.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-green-700 mb-1",children:"Total Gagn\xe9"}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-green-900",children:[500*b.length," DZD"]})]}),(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500 flex items-center justify-center",children:(0,t.jsx)(c.TrendingUp,{className:"w-8 h-8 text-white"})})]})})}),0===b.length?(0,t.jsx)(n.Card,{children:(0,t.jsxs)(n.CardContent,{className:"p-12 text-center",children:[(0,t.jsx)(c.Clock,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Aucune livraison termin\xe9e"})]})}):(0,t.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,t.jsx)(n.Card,{className:"border-gray-200",children:(0,t.jsx)(n.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,t.jsx)(c.CheckCircle2,{className:"w-5 h-5 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["#",e.id]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.deliveredAt?new Date(e.deliveredAt).toLocaleDateString("fr-DZ"):""})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-bold text-green-600",children:"+500 DZD"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.city})]})]})})},e.id))})]}),{})]}),(0,t.jsx)(()=>(0,t.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-around py-3 px-4",children:[(0,t.jsxs)("button",{onClick:()=>g("dashboard"),className:"flex flex-col items-center gap-1 transition-colors ".concat("dashboard"===h?"text-primary":"text-gray-400"),children:[(0,t.jsx)(c.Home,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Accueil"})]}),(0,t.jsxs)("button",{onClick:()=>g("active"),className:"flex flex-col items-center gap-1 transition-colors relative ".concat("active"===h?"text-primary":"text-gray-400"),children:[(0,t.jsx)(c.Truck,{className:"w-6 h-6"}),v&&(0,t.jsx)("span",{className:"absolute -top-1 right-2 w-2 h-2 bg-primary rounded-full"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Active"})]}),(0,t.jsxs)("button",{onClick:()=>g("history"),className:"flex flex-col items-center gap-1 transition-colors ".concat("history"===h?"text-primary":"text-gray-400"),children:[(0,t.jsx)(c.List,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Historique"})]})]})}),{})]})}},"(app-pages-browser)/__barrel_optimize__?names=AlertCircle,ArrowLeft,CheckCircle2,Clock,DollarSign,Globe,Home,List,LogOut,MapPin,Moon,Navigation,Package,Phone,RefreshCw,Sun,TrendingUp,Truck!=!../../node_modules/lucide-react/dist/esm/lucide-react.js":(e,s,a)=>{"use strict";a.r(s),a.d(s,{AlertCircle:()=>t.default,ArrowLeft:()=>r.default,CheckCircle2:()=>l.default,Clock:()=>i.default,DollarSign:()=>n.default,Globe:()=>c.default,Home:()=>o.default,List:()=>d.default,LogOut:()=>x.default,MapPin:()=>m.default,Moon:()=>u.default,Navigation:()=>p.default,Package:()=>h.default,Phone:()=>g.default,RefreshCw:()=>j.default,Sun:()=>N.default,TrendingUp:()=>v.default,Truck:()=>f.default});var t=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/circle-alert.js"),r=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/arrow-left.js"),l=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/circle-check.js"),i=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/clock.js"),n=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/dollar-sign.js"),c=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/globe.js"),o=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/house.js"),d=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/list.js"),x=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/log-out.js"),m=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/map-pin.js"),u=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/moon.js"),p=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/navigation.js"),h=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/package.js"),g=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/phone.js"),j=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js"),N=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/sun.js"),v=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/trending-up.js"),f=a("(app-pages-browser)/../../node_modules/lucide-react/dist/esm/icons/truck.js")}},e=>{e.O(0,[96,76,587,977],()=>e(e.s="(app-pages-browser)/../../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22E%3A%5C%5Cnn%5C%5Calbazdelivery%5C%5Capps%5C%5Cdriver%5C%5Capp%5C%5Cdriver%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!")),_N_E=e.O()}]);