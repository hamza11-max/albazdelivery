(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{249:(e,t,s)=>{Promise.resolve().then(s.bind(s,250))},250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,dynamic:()=>u});var r=s(113),a=s(121),i=s(251),n=s(252),l=s(253),c=s(361),o=s(380),d=s(360),x=s(381);let u="force-dynamic";function m(){let e=(0,n.useRouter)(),{data:t,status:s}=(0,x.useSession)(),u=null==t?void 0:t.user,m="authenticated"===s,[g,h]=(0,a.useState)("fr"),[v,p]=(0,a.useState)("dashboard"),[f,b]=(0,a.useState)([]),[j,N]=(0,a.useState)(null),[y,C]=(0,a.useState)([]),[w,S]=(0,a.useState)(!1),[E]=(0,a.useState)("driver-1"),{toast:D}=(0,d.useToast)(),[T,k]=(0,a.useState)(!1),{data:A,isConnected:L}=(0,o.useSSE)("/api/notifications/sse?role=driver&userId=".concat(E),!1),[I,P]=(0,a.useState)(null),[R,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"loading"!==s&&(m&&(null==u?void 0:u.role)==="DRIVER"||e.push("/login"))},[s,m,u,e]),(0,a.useEffect)(()=>{T?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[T]),(0,a.useEffect)(()=>{if((null==A?void 0:A.type)==="order_ready"){var e;z(),D({title:"Nouvelle Livraison Disponible!",description:"Commande #".concat(null==(e=A.order)?void 0:e.id," pr\xeate pour r\xe9cup\xe9ration"),duration:5e3})}},[A]);let z=async()=>{S(!0);try{var e;let t=await fetch("/api/drivers/deliveries?available=true"),s=await t.json();console.log("[Driver] Available deliveries:",s),s.success&&(null==(e=s.data)?void 0:e.deliveries)?b(s.data.deliveries):b([])}catch(e){console.error("[Driver] Error fetching deliveries:",e),b([])}finally{S(!1)}},O=async()=>{try{var e;let t=await fetch("/api/drivers/deliveries"),s=await t.json();if(console.log("[Driver] Fetched deliveries:",s),s.success&&(null==(e=s.data)?void 0:e.deliveries)){let e=s.data.deliveries,t=e.find(e=>e.status===i.OrderStatus.ASSIGNED||e.status===i.OrderStatus.IN_DELIVERY);N(t||null);let r=e.filter(e=>e.status===i.OrderStatus.DELIVERED);C(r)}else N(null),C([])}catch(e){console.error("[Driver] Error fetching active delivery:",e),N(null),C([])}},H=async e=>{try{let t=await fetch("/api/drivers/deliveries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e})}),s=await t.json();s.success&&(N(s.order),p("active"),z())}catch(e){console.error("[v0] Error accepting delivery:",e)}},V=async(e,t)=>{try{let s=await fetch("/api/drivers/deliveries/".concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,driverId:E})}),r=await s.json();r.success&&("delivered"===t?(N(null),p("dashboard"),z(),O()):N(r.order))}catch(e){console.error("[v0] Error updating delivery status:",e)}};return(0,a.useEffect)(()=>{let e=(()=>{if(!navigator.geolocation)return void D({title:"Erreur",description:"La g\xe9olocalisation n'est pas disponible",variant:"destructive"});B(!0),navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:s,accuracy:r,heading:a,speed:i}=e.coords;P({lat:t,lng:s}),fetch("/api/driver/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driverId:E,latitude:t,longitude:s,accuracy:r,heading:a||0,speed:i||0})}).catch(e=>console.error("[v0] Error sending location:",e))},e=>{console.error("[v0] Geolocation error:",e),D({title:"Erreur de g\xe9olocalisation",description:"Impossible d'acc\xe9der \xe0 votre position",variant:"destructive"})});let e=navigator.geolocation.watchPosition(e=>{let{latitude:t,longitude:s,accuracy:r,heading:a,speed:i}=e.coords;P({lat:t,lng:s}),fetch("/api/driver/location",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driverId:E,latitude:t,longitude:s,accuracy:r,heading:a||0,speed:i||0})}).catch(e=>console.error("[v0] Error sending location:",e))},e=>console.error("[v0] Watch position error:",e),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0});return()=>{navigator.geolocation.clearWatch(e),B(!1)}})();z(),O();let t=setInterval(()=>{z(),O()},5e3);return()=>{e&&e(),clearInterval(t)}},[E]),(0,r.jsxs)("div",{className:"min-h-screen bg-background ".concat(T?"dark":""),children:[(0,r.jsx)(()=>(0,r.jsx)("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-primary to-orange-500 text-white shadow-lg",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"AL-baz",className:"h-10 w-auto"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold",children:"ar"===g?"سائق AL-baz":"AL-baz Driver"}),(0,r.jsx)("p",{className:"text-xs text-white/80",children:(null==u?void 0:u.name)||"Driver"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>h("fr"===g?"ar":"fr"),title:"fr"===g?"العربية":"Fran\xe7ais",children:(0,r.jsx)(c.Globe,{className:"w-5 h-5"})}),(0,r.jsx)(l.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>k(!T),children:T?(0,r.jsx)(c.Sun,{className:"w-5 h-5"}):(0,r.jsx)(c.Moon,{className:"w-5 h-5"})}),(0,r.jsx)(l.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>{z(),O()},children:(0,r.jsx)(c.RefreshCw,{className:"w-5 h-5 ".concat(w?"animate-spin":"")})}),(0,r.jsx)(l.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>(0,x.signOut)({callbackUrl:"/login"}),children:(0,r.jsx)(c.LogOut,{className:"w-5 h-5"})})]})]})})}),{}),(0,r.jsxs)("main",{children:["dashboard"===v&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(l.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:(0,r.jsx)(c.CheckCircle2,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:y.length}),(0,r.jsx)("p",{className:"text-xs text-green-700",children:"Livraisons"})]})]})})}),(0,r.jsx)(l.Card,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:(0,r.jsx)(c.DollarSign,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:500*y.length}),(0,r.jsx)("p",{className:"text-xs text-blue-700",children:"DZD Gagn\xe9s"})]})]})})})]}),j&&(0,r.jsx)(l.Card,{className:"border-primary bg-primary/5",children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.AlertCircle,{className:"w-6 h-6 text-primary"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Livraison en cours"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Commande #",j.id]})]}),(0,r.jsx)(l.Button,{size:"sm",onClick:()=>p("active"),children:"Voir"})]})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Livraisons Disponibles"}),(0,r.jsxs)(l.Badge,{variant:"secondary",children:[f.length," disponible(s)"]})]}),0===f.length?(0,r.jsx)(l.Card,{children:(0,r.jsxs)(l.CardContent,{className:"p-12 text-center",children:[(0,r.jsx)(c.Package,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg text-gray-600 mb-2",children:"Aucune livraison disponible"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"V\xe9rifiez \xe0 nouveau dans quelques instants"})]})}):(0,r.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,r.jsx)(l.Card,{className:"border-gray-200 hover:shadow-lg transition-shadow",children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(l.Badge,{className:"bg-green-500",children:"Pr\xeat"}),(0,r.jsxs)("span",{className:"text-sm font-mono text-gray-600",children:["#",e.id]})]}),(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["Commande de ",e.total," DZD"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.items.length," article(s)"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-primary",children:"500 DZD"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Frais de livraison"})]})]}),(0,r.jsxs)("div",{className:"space-y-2 border-t pt-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(c.Package,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"R\xe9cup\xe9ration"}),(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Store #",e.storeId]})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(c.MapPin,{className:"w-4 h-4 text-primary mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Livraison"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.deliveryAddress}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.city})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(c.Phone,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Client"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.customerPhone})]})]})]}),(0,r.jsx)("div",{className:"flex gap-2 pt-2",children:(0,r.jsxs)(l.Button,{className:"flex-1 bg-gradient-to-r from-primary to-orange-500",onClick:()=>H(e.id),disabled:!!j,children:[(0,r.jsx)(c.CheckCircle2,{className:"w-4 h-4 mr-2"}),"Accepter"]})})]})})},e.id))})]})]}),{}),"active"===v&&(0,r.jsx)(()=>{if(!j)return(0,r.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,r.jsx)(l.Card,{children:(0,r.jsxs)(l.CardContent,{className:"p-12 text-center",children:[(0,r.jsx)(c.Package,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Aucune livraison active"})]})})});let e=j.status===i.OrderStatus.IN_DELIVERY;return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,r.jsx)(l.Card,{className:"border-primary bg-gradient-to-br from-primary/5 to-orange-500/5",children:(0,r.jsx)(l.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary mx-auto flex items-center justify-center",children:(0,r.jsx)(c.Truck,{className:"w-8 h-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Commande"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["#",j.id]})]}),(0,r.jsx)(l.Badge,{className:e?"bg-blue-500":"bg-green-500",children:e?"En Livraison":"Assign\xe9"})]})})}),(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsx)(l.CardTitle,{children:"D\xe9tails de la Commande"})}),(0,r.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Total Commande"}),(0,r.jsxs)("span",{className:"font-bold text-gray-900",children:[j.total," DZD"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Articles"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:j.items.length})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-3 border-b",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Paiement"}),(0,r.jsx)(l.Badge,{variant:"outline",children:"cash"===j.paymentMethod?"Esp\xe8ces":"Carte"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Vos Frais"}),(0,r.jsx)("span",{className:"font-bold text-primary text-xl",children:"500 DZD"})]})]})]}),(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Package,{className:"w-5 h-5 text-primary"}),"Point de R\xe9cup\xe9ration"]})}),(0,r.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["Store #",j.storeId]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["123 Rue Didouche Mourad, ",j.city]})]}),(0,r.jsxs)(l.Button,{variant:"outline",className:"w-full bg-transparent",children:[(0,r.jsx)(c.Navigation,{className:"w-4 h-4 mr-2"}),"Naviguer vers le magasin"]})]})]}),(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.MapPin,{className:"w-5 h-5 text-primary"}),"Adresse de Livraison"]})}),(0,r.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:j.deliveryAddress}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:j.city})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)(c.Phone,{className:"w-4 h-4 text-gray-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Contact Client"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:j.customerPhone})]}),(0,r.jsx)(l.Button,{size:"sm",variant:"outline",children:"Appeler"})]}),(0,r.jsxs)(l.Button,{variant:"outline",className:"w-full bg-transparent",children:[(0,r.jsx)(c.Navigation,{className:"w-4 h-4 mr-2"}),"Naviguer vers le client"]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[e?(0,r.jsxs)(l.Button,{size:"lg",className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-lg",onClick:()=>V(j.id,"delivered"),children:[(0,r.jsx)(c.CheckCircle2,{className:"w-5 h-5 mr-2"}),"Marquer comme Livr\xe9e"]}):(0,r.jsxs)(l.Button,{size:"lg",className:"w-full bg-gradient-to-r from-primary to-orange-500 text-lg",onClick:()=>V(j.id,"in_delivery"),children:[(0,r.jsx)(c.CheckCircle2,{className:"w-5 h-5 mr-2"}),"Commande R\xe9cup\xe9r\xe9e"]}),(0,r.jsxs)(l.Button,{variant:"outline",size:"lg",className:"w-full bg-transparent",onClick:()=>p("dashboard"),children:[(0,r.jsx)(c.ArrowLeft,{className:"w-5 h-5 mr-2"}),"Retour au Tableau de Bord"]})]})]})},{}),"history"===v&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 pb-24 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Historique"}),(0,r.jsxs)(l.Badge,{variant:"secondary",children:[y.length," livraison(s)"]})]}),(0,r.jsx)(l.Card,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,r.jsx)(l.CardContent,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-green-700 mb-1",children:"Total Gagn\xe9"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-green-900",children:[500*y.length," DZD"]})]}),(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500 flex items-center justify-center",children:(0,r.jsx)(c.TrendingUp,{className:"w-8 h-8 text-white"})})]})})}),0===y.length?(0,r.jsx)(l.Card,{children:(0,r.jsxs)(l.CardContent,{className:"p-12 text-center",children:[(0,r.jsx)(c.Clock,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Aucune livraison termin\xe9e"})]})}):(0,r.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,r.jsx)(l.Card,{className:"border-gray-200",children:(0,r.jsx)(l.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,r.jsx)(c.CheckCircle2,{className:"w-5 h-5 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:["#",e.id]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.deliveredAt?new Date(e.deliveredAt).toLocaleDateString("fr-DZ"):""})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-bold text-green-600",children:"+500 DZD"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.city})]})]})})},e.id))})]}),{})]}),(0,r.jsx)(()=>(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-around py-3 px-4",children:[(0,r.jsxs)("button",{onClick:()=>p("dashboard"),className:"flex flex-col items-center gap-1 transition-colors ".concat("dashboard"===v?"text-primary":"text-gray-400"),children:[(0,r.jsx)(c.Home,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Accueil"})]}),(0,r.jsxs)("button",{onClick:()=>p("active"),className:"flex flex-col items-center gap-1 transition-colors relative ".concat("active"===v?"text-primary":"text-gray-400"),children:[(0,r.jsx)(c.Truck,{className:"w-6 h-6"}),j&&(0,r.jsx)("span",{className:"absolute -top-1 right-2 w-2 h-2 bg-primary rounded-full"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Active"})]}),(0,r.jsxs)("button",{onClick:()=>p("history"),className:"flex flex-col items-center gap-1 transition-colors ".concat("history"===v?"text-primary":"text-gray-400"),children:[(0,r.jsx)(c.List,{className:"w-6 h-6"}),(0,r.jsx)("span",{className:"text-xs font-medium",children:"Historique"})]})]})}),{})]})}},251:(e,t,s)=>{"use strict";s.r(t),s.d(t,{OrderStatus:()=>r});let r={PENDING:"PENDING",ACCEPTED:"ACCEPTED",PREPARING:"PREPARING",READY:"READY",ASSIGNED:"ASSIGNED",IN_DELIVERY:"IN_DELIVERY",DELIVERED:"DELIVERED",CANCELLED:"CANCELLED"}},253:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Badge:()=>i.Badge,Button:()=>r.Button,Card:()=>a.Card,CardContent:()=>a.CardContent,CardDescription:()=>a.CardDescription,CardFooter:()=>a.CardFooter,CardHeader:()=>a.CardHeader,CardTitle:()=>a.CardTitle,Dialog:()=>o.Dialog,DialogContent:()=>o.DialogContent,DialogDescription:()=>o.DialogDescription,DialogFooter:()=>o.DialogFooter,DialogHeader:()=>o.DialogHeader,DialogTitle:()=>o.DialogTitle,DialogTrigger:()=>o.DialogTrigger,Input:()=>n.Input,Label:()=>l.Label,Select:()=>u.Select,SelectContent:()=>u.SelectContent,SelectItem:()=>u.SelectItem,SelectTrigger:()=>u.SelectTrigger,SelectValue:()=>u.SelectValue,Table:()=>d.Table,TableBody:()=>d.TableBody,TableCell:()=>d.TableCell,TableHead:()=>d.TableHead,TableHeader:()=>d.TableHeader,TableRow:()=>d.TableRow,Tabs:()=>x.Tabs,TabsContent:()=>x.TabsContent,TabsList:()=>x.TabsList,TabsTrigger:()=>x.TabsTrigger,Textarea:()=>c.Textarea,Toaster:()=>m.Toaster,toast:()=>g.toast,useToast:()=>g.useToast});var r=s(254),a=s(261),i=s(262),n=s(263),l=s(264),c=s(267),o=s(268),d=s(326),x=s(327),u=s(339),m=s(356),g=s(360)},254:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Button:()=>c,buttonVariants:()=>l});var r=s(113);s(121);var a=s(255),i=s(257),n=s(259);let l=(0,i.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:i,asChild:c=!1,...o}=e,d=c?a.Slot:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,n.cn)(l({variant:s,size:i,className:t})),...o})}},261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Card:()=>i,CardAction:()=>o,CardContent:()=>d,CardDescription:()=>c,CardFooter:()=>x,CardHeader:()=>n,CardTitle:()=>l});var r=s(113);s(121);var a=s(259);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-action",className:(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}function x(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Badge:()=>c,badgeVariants:()=>l});var r=s(113);s(121);var a=s(255),i=s(257),n=s(259);let l=(0,i.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,asChild:i=!1,...c}=e,o=i?a.Slot:"span";return(0,r.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(l({variant:s}),t),...c})}},263:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Input:()=>i});var r=s(113);s(121);var a=s(259);function i(e){let{className:t,type:s,...i}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},267:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Textarea:()=>i});var r=s(113);s(121);var a=s(259);function i(e){let{className:t,...s}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}},361:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AlertCircle:()=>r.default,ArrowLeft:()=>a.default,CheckCircle2:()=>i.default,Clock:()=>n.default,DollarSign:()=>l.default,Globe:()=>c.default,Home:()=>o.default,List:()=>d.default,LogOut:()=>x.default,MapPin:()=>u.default,Moon:()=>m.default,Navigation:()=>g.default,Package:()=>h.default,Phone:()=>v.default,RefreshCw:()=>p.default,Sun:()=>f.default,TrendingUp:()=>b.default,Truck:()=>j.default});var r=s(362),a=s(363),i=s(364),n=s(365),l=s(366),c=s(367),o=s(368),d=s(369),x=s(370),u=s(371),m=s(372),g=s(373),h=s(374),v=s(375),p=s(376),f=s(377),b=s(378),j=s(379)},380:(e,t,s)=>{"use strict";s.r(t),s.d(t,{useSSE:()=>a});var r=s(121);function a(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[s,a]=(0,r.useState)(null),[i,n]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),o=(0,r.useRef)(null),d=(0,r.useRef)(null),x=(0,r.useRef)(0),u=(0,r.useRef)(null),[m,g]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!t)return;let s=()=>{if(x.current>=3){console.log("[v0] SSE failed multiple times, switching to polling fallback"),g(!0),n(null);return}o.current&&(o.current.close(),o.current=null);try{console.log("[v0] SSE connecting to:",e);let t=new EventSource(e);o.current=t,t.onopen=()=>{c(!0),n(null),x.current=0,console.log("[v0] SSE connection opened")},t.onmessage=e=>{try{let t=JSON.parse(e.data);a(t),console.log("[v0] SSE message received:",t.type)}catch(e){console.error("[v0] Error parsing SSE data:",e)}},t.onerror=e=>{if(console.error("[v0] SSE error, readyState:",t.readyState),c(!1),t.readyState===EventSource.CLOSED)if(console.log("[v0] SSE connection closed"),t.close(),x.current<3){let e=Math.min(1e3*Math.pow(2,x.current),1e4);x.current++,console.log("[v0] Reconnecting in ".concat(e,"ms (attempt ").concat(x.current,")")),d.current=setTimeout(()=>{s()},e)}else console.log("[v0] Max reconnection attempts reached, switching to polling"),g(!0)}}catch(e){console.error("[v0] Error creating EventSource:",e),n(e),c(!1),g(!0)}};return m||s(),()=>{console.log("[v0] SSE cleanup"),d.current&&(clearTimeout(d.current),d.current=null),u.current&&(clearInterval(u.current),u.current=null),o.current&&(o.current.close(),o.current=null,c(!1),console.log("[v0] SSE connection closed"))}},[e,t,m]),{data:s,error:i,isConnected:l||m}}}},e=>{e.O(0,[96,53,587,977],()=>e(e.s=249)),_N_E=e.O()}]);