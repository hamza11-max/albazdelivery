(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{249:(e,s,t)=>{Promise.resolve().then(t.bind(t,250))},250:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(113),r=t(121),n=t(251),l=t(252),i=t(253),c=t(279),d=t(382),o=t(383),u=t(394),m=t(395),h=t(399);function x(){var e,s;let t=(0,n.useRouter)(),{isAuthenticated:x,user:p,isLoading:g,status:j}=(0,u.useAuth)(),{toast:v}=(0,d.useToast)(),[f,b]=(0,r.useState)(!1),[N,y]=(0,r.useState)("dashboard"),[C,w]=(0,r.useState)("fr"),[T,D]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[I,B]=(0,r.useState)(!1),{loadingState:E,setLoadingState:L,fetchWithCache:F,fetchSales:H,fetchCustomers:R,fetchSuppliers:V,fetchProducts:O,fetchOrders:q,fetchCategories:z}=(0,m.useDashboardData)(),[M,Z]=(0,r.useState)([]),[U,_]=(0,r.useState)([]),[G,J]=(0,r.useState)([]),[W,K]=(0,r.useState)([]),[Q,X]=(0,r.useState)([]),[Y,$]=(0,r.useState)([]),[ee,es]=(0,r.useState)([]),[et,ea]=(0,r.useState)(0),[er,en]=(0,r.useState)(0),[el,ei]=(0,r.useState)(0),[ec,ed]=(0,r.useState)([]),[eo,eu]=(0,r.useState)({sku:"",name:"",category:"",description:"",supplierId:"",costPrice:"",sellingPrice:"",price:"",stock:0,lowStockThreshold:0,barcode:"",image:""}),[em,eh]=(0,r.useState)({name:"",email:"",phone:"",address:""}),[ex,ep]=(0,r.useState)(null),[eg,ej]=(0,r.useState)([]),[ev,ef]=(0,r.useState)([]),[eb,eN]=(0,r.useState)(null),[ey,eC]=(0,r.useState)(!1),[ew,eT]=(0,r.useState)(""),[eD,eS]=(0,r.useState)({name:"",contactPerson:"",phone:"",email:"",address:""}),[ek,eA]=(0,r.useState)([]),[eP,eI]=(0,r.useState)(null),[eB,eE]=(0,r.useState)(0),[eL,eF]=(0,r.useState)(null),[eH,eR]=(0,r.useState)(null),[eV,eO]=(0,r.useState)(!1),[eq,ez]=(0,r.useState)(null),[eM,eZ]=(0,r.useState)(!1),eU=(0,r.useRef)(null),e_=(0,r.useRef)(null),eG=(0,r.useRef)(),eJ=(0,r.useRef)(null),eW=(0,r.useRef)(null),eK=(0,r.useRef)(null),eQ=(0,r.useRef)(null),[eX,eY]=(0,r.useState)(null),[e$,e0]=(0,r.useState)(null),[e2,e1]=(0,r.useState)(!1),[e4,e3]=(0,r.useState)(!1),[e5,e6]=(0,r.useState)([]),[e8,e9]=(0,r.useState)(null),[e7,se]=(0,r.useState)(!1),ss=(0,r.useMemo)(()=>"ar"===C,[C]),st=(0,r.useCallback)((e,s)=>"ar"===C?s:e,[C]),sa=(0,r.useMemo)(()=>e4&&null!=e8?e8:void 0,[e4,e8]);(0,r.useEffect)(()=>{"BarcodeDetector"in window&&eZ(!0)},[]);let sr=(0,r.useCallback)(()=>{eG.current&&(cancelAnimationFrame(eG.current),eG.current=void 0),e_.current&&(e_.current.getTracks().forEach(e=>e.stop()),e_.current=null),eU.current&&(eU.current.srcObject=null)},[]),sn=(0,r.useCallback)(async()=>{if(ez(null),!eM)return void ez(st("La lecture de code-barres n'est pas prise en charge sur cet appareil.","مسح الباركود غير مدعوم على هذا الجهاز."));try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});e_.current=e,eU.current&&(eU.current.srcObject=e,await eU.current.play()),eJ.current=new window.BarcodeDetector({formats:["code_128","code_39","ean_13","qr_code","upc_a","upc_e"]});let s=async()=>{if(!eJ.current||!eU.current){eG.current=requestAnimationFrame(s);return}try{let s=await eJ.current.detect(eU.current);if(null==s?void 0:s.length){var e;let t=null==(e=s[0])?void 0:e.rawValue;if(t){eT(t);let e=W.find(e=>e.barcode===t);e?(su(e),(0,l.playSuccessSound)(),v({title:st("Produit trouv\xe9","تم العثور على المنتج"),description:st("Le produit a \xe9t\xe9 ajout\xe9 au panier.","تمت إضافة المنتج إلى السلة.")})):v({title:st("Code-barres inconnu","رمز غير معروف"),description:st("Aucun produit ne correspond \xe0 ce code-barres.","لا يوجد منتج مطابق لهذا الرمز."),variant:"destructive"}),eO(!1);return}}}catch(e){console.error("[v0] Barcode detection error:",e),ez(st("Impossible de lire le code-barres.","تعذر قراءة الرمز."))}eG.current=requestAnimationFrame(s)};eG.current=requestAnimationFrame(s)}catch(e){console.error("[v0] Error starting barcode scanner:",e),ez(st("Impossible d'acc\xe9der \xe0 la cam\xe9ra.","تعذر الوصول إلى الكاميرا."))}},[su,eM,W,v,st]);(0,r.useEffect)(()=>eV?(sn(),()=>{sr()}):void sr(),[eV,sn,sr]);let sl=(0,r.useCallback)(()=>{eK.current&&(eK.current.getTracks().forEach(e=>e.stop()),eK.current=null),eW.current&&(eW.current.srcObject=null),e1(!1)},[]),si=(0,r.useCallback)(async()=>{e0(null);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});eK.current=e,eW.current&&(eW.current.srcObject=e,await eW.current.play(),e1(!0))}catch(e){console.error("[v0] Error accessing camera:",e),e0(st("Impossible d'acc\xe9der \xe0 la cam\xe9ra.","تعذر الوصول إلى الكاميرا."))}},[st]);(0,r.useCallback)(()=>{var e;if(!eW.current)return;let s=eW.current,t=null!=(e=eQ.current)?e:document.createElement("canvas");eQ.current=t,t.width=s.videoWidth,t.height=s.videoHeight;let a=t.getContext("2d");a&&(a.drawImage(s,0,0,t.width,t.height),eY(t.toDataURL("image/jpeg",.9)),(0,l.playSuccessSound)())},[]),(0,r.useEffect)(()=>{if(!ey){sl(),eY(null);return}return si(),()=>sl()},[ey,si,sl]),(0,r.useEffect)(()=>()=>{sr(),sl()},[sr,sl]);let sc=(0,r.useCallback)(async e=>{try{let[s,t,a,r,n,l]=await Promise.all([H(e),q(e),O(e),R(e),V(e),z(e)]);if(s&&Z(s),t&&X(t),a){K(a);let e=a.filter(e=>{var s;return e.stock<=(null!=(s=e.lowStockThreshold)?s:10)});es(e)}if(r&&_(r),n&&J(n),l&&$(l),null==s?void 0:s.length){let e=new Date,t=new Date(e.getTime()-6048e5),r=new Date(e.getTime()-2592e6),n=s.filter(s=>new Date(s.createdAt).toDateString()===e.toDateString()),l=s.filter(e=>new Date(e.createdAt)>=t),i=s.filter(e=>new Date(e.createdAt)>=r);if(ea(n.reduce((e,s)=>e+(s.total||0),0)),en(l.reduce((e,s)=>e+(s.total||0),0)),ei(i.reduce((e,s)=>e+(s.total||0),0)),a){let e=new Map;s.forEach(s=>s.items.forEach(s=>{let t=e.get(s.productId)||{quantity:0,total:0};e.set(s.productId,{quantity:t.quantity+s.quantity,total:t.total+s.price*s.quantity})}));let t=Array.from(e.entries()).map(e=>{var s;let[t,r]=e;return{productId:t,productName:(null==(s=a.find(e=>e.id===t))?void 0:s.name)||"Unknown",totalQuantity:r.quantity,totalSales:r.total,totalSold:r.quantity}}).sort((e,s)=>s.totalSales-e.totalSales).slice(0,5);ed(t)}}L(e=>({...e,products:!1,categories:!1,sales:!1,customers:!1,suppliers:!1,orders:!1,dashboard:!1}))}catch(e){console.error("Error loading dashboard data:",e),v({title:st("Erreur","خطأ"),description:st("Impossible de charger les donn\xe9es du tableau de bord.","تعذر تحميل بيانات لوحة التحكم."),variant:"destructive"}),L(e=>({...e,products:!1,categories:!1,sales:!1,customers:!1,suppliers:!1,orders:!1,dashboard:!1}))}},[H,q,O,R,V,z,L,v]),sd=async()=>{try{let e=eL?"PUT":"POST",s="/api/erp/inventory".concat(sa?"?vendorId=".concat(sa):""),t=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...eo,id:null==eL?void 0:eL.id,costPrice:Number.parseFloat(eo.costPrice),sellingPrice:Number.parseFloat(eo.sellingPrice),stock:eo.stock,lowStockThreshold:eo.lowStockThreshold,vendorId:sa})});(await t.json()).success&&((0,h.fetchInventory)(sa),(0,h.fetchDashboardData)(sa),D(!1),eF(null),eu({sku:"",name:"",category:"",description:"",supplierId:"",costPrice:"",sellingPrice:"",price:"",stock:0,lowStockThreshold:0,barcode:"",image:""}),v({title:eL?st("Produit mis \xe0 jour","تم تحديث المنتج"):st("Produit ajout\xe9","تمت إضافة المنتج"),description:st("L'inventaire a \xe9t\xe9 mis \xe0 jour avec succ\xe8s","تم تحديث المخزون بنجاح")}))}catch(e){console.error("[v0] Error saving product:",e)}},so=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit?"))try{let s="/api/erp/inventory?id=".concat(e).concat(sa?"&vendorId=".concat(sa):""),t=await fetch(s,{method:"DELETE"});(await t.json()).success&&((0,h.fetchInventory)(sa),v({title:st("Produit supprim\xe9","تم حذف المنتج"),description:st("Le produit a \xe9t\xe9 supprim\xe9 de l'inventaire","تم حذف المنتج من المخزون.")}))}catch(e){console.error("[v0] Error deleting product:",e)}},su=e=>{ek.find(s=>s.id===e.id)?eA(ek.map(s=>s.id===e.id?{...s,quantity:s.quantity+1}:s)):eA([...ek,{id:e.id,productId:e.id,productName:e.name,quantity:1,price:e.sellingPrice||0,discount:0}])},sm=(e,s)=>{eA(ek.map(t=>t.productId===e?{...t,quantity:Math.max(0,t.quantity+s)}:t).filter(e=>e.quantity>0))},sh=async e=>{if(0===ek.length)return void v({title:st("Panier vide","السلة فارغة"),description:st("Ajoutez des produits au panier avant de finaliser la vente","أضِف منتجات إلى السلة قبل إتمام عملية البيع."),variant:"destructive"});let s=ek.reduce((e,s)=>e+s.price*s.quantity,0),t=s-eB;try{let a="/api/erp/sales".concat(sa?"?vendorId=".concat(sa):""),r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:eP||void 0,items:ek,subtotal:s,discount:eB,total:t,paymentMethod:e,vendorId:sa})}),n=await r.json();n.success&&(eR(n.sale),B(!0),eA([]),eE(0),eI(null),(0,h.fetchDashboardData)(sa),(0,h.fetchInventory)(sa),H(sa),v({title:st("Vente compl\xe9t\xe9e","تمت العملية"),description:ss?"تم تسجيل عملية بيع بقيمة ".concat(t.toFixed(2)," ").concat(st("DZD","دج"),"."):"Vente de ".concat(t.toFixed(2)," ").concat(st("DZD","دج")," enregistr\xe9e avec succ\xe8s.")}))}catch(e){console.error("[v0] Error completing sale:",e)}},sx=async()=>{try{let e=await fetch("/api/erp/customers".concat(sa?"?vendorId=".concat(sa):""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(em)});(await e.json()).success&&(R(sa),k(!1),eh({name:"",email:"",phone:"",address:""}),v({title:st("Client ajout\xe9","تم إضافة العميل"),description:st("Le client a \xe9t\xe9 ajout\xe9 avec succ\xe8s","تمت إضافة العميل بنجاح.")}))}catch(e){console.error("[v0] Error saving customer:",e)}},sp=async()=>{try{let e=await fetch("/api/erp/suppliers".concat(sa?"?vendorId=".concat(sa):""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...eD,vendorId:sa})});(await e.json()).success&&(V(sa),P(!1),eS({name:"",contactPerson:"",phone:"",email:"",address:""}),v({title:st("Fournisseur ajout\xe9","تم إضافة المورد"),description:st("Le fournisseur a \xe9t\xe9 ajout\xe9 avec succ\xe8s","تمت إضافة المورد بنجاح.")}))}catch(e){console.error("[v0] Error saving supplier:",e)}};if((0,r.useEffect)(()=>{if("loading"===j)return;if(!x||!p)return void t.push("/login");let e="ADMIN"===p.role,s="VENDOR"===p.role;if(!e&&!s)return void t.push("/login");e3(e),e||e9(null)},[j,x,p,t]),(0,r.useEffect)(()=>{if(!e4)return void e6([]);let e=new AbortController;return(async()=>{try{se(!0);let s=await fetch("/api/admin/users?role=VENDOR&status=APPROVED&limit=500",{signal:e.signal}),t=await s.json();if(null==t?void 0:t.success){let e=Array.isArray(t.users)?t.users.map(e=>({id:e.id,name:e.name||e.email||"Vendor"})):[];e6(e),e.length&&!e8&&e9(e[0].id)}}catch(e){"AbortError"!==e.name&&(console.error("[v0] Failed to load vendors:",e),v({title:st("Erreur","خطأ"),description:st("Impossible de charger la liste des vendeurs.","تعذر تحميل قائمة التجار."),variant:"destructive"}))}finally{se(!1)}})(),()=>e.abort()},[e4,e8,v,st]),(0,r.useEffect)(()=>{"loading"!==j&&x&&(!e4||e8)&&sc(e4&&null!=e8?e8:void 0)},[j,x,e4,e8,sc]),(0,r.useEffect)(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]),g||"loading"===j)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})});if(!x||!p)return null;let sg=ek.reduce((e,s)=>e+s.price*s.quantity,0),sj=sg-eB;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",dir:ss?"rtl":"ltr",children:[(0,a.jsx)(o.default,{language:C,setLanguage:w,isDarkMode:f,setIsDarkMode:b}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-6",dir:ss?"rtl":"ltr",children:[e4&&(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:st("Mode administrateur","وضع المسؤول")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:st("S\xe9lectionnez un vendeur pour consulter et g\xe9rer ses donn\xe9es.","اختر تاجراً لعرض بياناته وإدارتها.")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Label,{className:"text-sm font-medium",children:st("Vendeur","التاجر")}),(0,a.jsxs)("select",{className:"h-10 rounded-md border px-3 text-sm bg-background",value:null!=e8?e8:"",onChange:e=>e9(e.target.value||null),disabled:e7||0===e5.length,children:[0===e5.length&&(0,a.jsx)("option",{value:"",children:e7?st("Chargement...","جار التحميل..."):st("Aucun vendeur disponible","لا يوجد تجار متاحون")}),e5.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)(c.Tabs,{value:N,onValueChange:y,children:[(0,a.jsxs)(c.TabsList,{className:"grid w-full grid-cols-7 mb-6",children:[(0,a.jsxs)(c.TabsTrigger,{value:"dashboard",children:[(0,a.jsx)(i.LayoutDashboard,{className:"w-4 h-4 mr-2"}),st("Tableau de bord","لوحة التحكم")]}),(0,a.jsxs)(c.TabsTrigger,{value:"inventory",children:[(0,a.jsx)(i.Package,{className:"w-4 h-4 mr-2"}),st("Inventaire","المخزون")]}),(0,a.jsxs)(c.TabsTrigger,{value:"pos",children:[(0,a.jsx)(i.ShoppingCart,{className:"w-4 h-4 mr-2"}),st("Point de Vente","نقطة البيع")]}),(0,a.jsxs)(c.TabsTrigger,{value:"sales",children:[(0,a.jsx)(i.History,{className:"w-4 h-4 mr-2"}),st("Ventes","المبيعات")]}),(0,a.jsxs)(c.TabsTrigger,{value:"customers",children:[(0,a.jsx)(i.Users,{className:"w-4 h-4 mr-2"}),st("Clients","العملاء")]}),(0,a.jsxs)(c.TabsTrigger,{value:"suppliers",children:[(0,a.jsx)(i.Truck,{className:"w-4 h-4 mr-2"}),st("Fournisseurs","الموردون")]}),(0,a.jsxs)(c.TabsTrigger,{value:"ai",children:[(0,a.jsx)(i.BarChart3,{className:"w-4 h-4 mr-2"}),st("Analyse IA","تحليلات الذكاء الاصطناعي")]})]}),(0,a.jsxs)(c.TabsContent,{value:"dashboard",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{className:"pb-3",children:(0,a.jsx)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:st("Ventes d'aujourd'hui","مبيعات اليوم")})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[et.toFixed(2)," ",st("DZD","دج")]}),(0,a.jsx)(i.DollarSign,{className:"w-8 h-8 text-green-500"})]})})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{className:"pb-3",children:(0,a.jsx)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:st("Ventes cette semaine","مبيعات هذا الأسبوع")})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[er.toFixed(2)," ",st("DZD","دج")]}),(0,a.jsx)(i.TrendingUp,{className:"w-8 h-8 text-blue-500"})]})})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{className:"pb-3",children:(0,a.jsx)(c.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:st("Ventes ce mois","مبيعات هذا الشهر")})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[el.toFixed(2)," ",st("DZD","دج")]}),(0,a.jsx)(i.BarChart3,{className:"w-8 h-8 text-purple-500"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsx)(c.CardTitle,{children:st("Produits les plus vendus","المنتجات الأكثر مبيعاً")})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[ec.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-primary",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.productName}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalQuantity," ",st("vendus","تم بيعها")]})]})]}),(0,a.jsx)(i.TrendingUp,{className:"w-5 h-5 text-green-500"})]},e.productId)),0===ec.length&&(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:st("Aucune vente enregistr\xe9e","لا توجد مبيعات مسجلة")})]})})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.AlertTriangle,{className:"w-5 h-5 text-orange-500"}),st("Alertes stock faible","تنبيهات انخفاض المخزون")]})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[ee.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[st("R\xe9f\xe9rence","المرجع"),": ",e.sku]})]}),(0,a.jsxs)(c.Badge,{variant:"destructive",children:[e.stock," ",st("restants","متبقي")]})]},e.id)),0===ee.length&&(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:st("Tous les stocks sont suffisants","جميع المخزونات كافية")})]})})]})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsx)(c.CardTitle,{children:st("Actions rapides","إجراءات سريعة")})}),(0,a.jsx)(c.CardContent,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)(c.Button,{onClick:()=>y("pos"),className:"h-20 flex-col gap-2",children:[(0,a.jsx)(i.ShoppingCart,{className:"w-6 h-6"}),st("Nouvelle vente","عملية بيع جديدة")]}),(0,a.jsxs)(c.Button,{onClick:()=>D(!0),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,a.jsx)(i.Plus,{className:"w-6 h-6"}),st("Ajouter un produit","إضافة منتج")]}),(0,a.jsxs)(c.Button,{onClick:()=>y("inventory"),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,a.jsx)(i.Package,{className:"w-6 h-6"}),st("Voir l'inventaire","عرض المخزون")]}),(0,a.jsxs)(c.Button,{onClick:()=>y("sales"),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,a.jsx)(i.History,{className:"w-6 h-6"}),st("Historique","السجل")]})]})})]})]}),(0,a.jsxs)(c.TabsContent,{value:"inventory",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:st("Gestion de l'inventaire","إدارة المخزون")}),(0,a.jsxs)(c.Button,{onClick:()=>D(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 ".concat(ss?"ml-2":"mr-2")}),st("Ajouter un produit","إضافة منتج")]})]}),(0,a.jsx)(c.Card,{children:(0,a.jsxs)(c.CardContent,{className:"p-6",children:[(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{children:"SKU"}),(0,a.jsx)(c.TableHead,{children:"Nom"}),(0,a.jsx)(c.TableHead,{children:"Cat\xe9gorie"}),(0,a.jsx)(c.TableHead,{children:"Prix Co\xfbt"}),(0,a.jsx)(c.TableHead,{children:"Prix Vente"}),(0,a.jsx)(c.TableHead,{children:"Stock"}),(0,a.jsx)(c.TableHead,{children:"Actions"})]})}),(0,a.jsx)(c.TableBody,{children:W.map(e=>(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableCell,{className:"font-mono",children:e.sku}),(0,a.jsx)(c.TableCell,{className:"font-medium",children:e.name}),(0,a.jsx)(c.TableCell,{children:e.category}),(0,a.jsxs)(c.TableCell,{children:[e.costPrice," DZD"]}),(0,a.jsxs)(c.TableCell,{className:"font-semibold",children:[e.sellingPrice," DZD"]}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)(c.Badge,{variant:e.stock<=e.lowStockThreshold?"destructive":"default",children:e.stock})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:()=>{var s;eF(e),eu({sku:e.sku,name:e.name,category:e.category,description:e.description||"",supplierId:(null==(s=e.supplierId)?void 0:s.toString())||"",costPrice:e.costPrice.toString(),sellingPrice:e.sellingPrice.toString(),price:e.price.toString(),stock:e.stock,lowStockThreshold:e.lowStockThreshold,barcode:e.barcode||"",image:e.image||""}),D(!0)},children:(0,a.jsx)(i.Edit,{className:"w-4 h-4"})}),(0,a.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:()=>{eN(e.id),eC(!0)},children:(0,a.jsx)(i.Camera,{className:"w-4 h-4"})}),(0,a.jsx)(c.Button,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>so(e.id),children:(0,a.jsx)(i.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]}),0===W.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.Package,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:st("Aucun produit dans l'inventaire","لا توجد منتجات في المخزون")}),(0,a.jsxs)(c.Button,{onClick:()=>D(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 ".concat(ss?"ml-2":"mr-2")}),st("Ajouter votre premier produit","أضف أول منتج لك")]})]})]})})]}),(0,a.jsxs)(c.TabsContent,{value:"pos",className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Point de Vente"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsxs)("div",{className:"flex ".concat(ss?"flex-row-reverse":"flex-row"," items-center gap-2"),children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(i.Search,{className:"absolute ".concat(ss?"right-3":"left-3"," top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5")}),(0,a.jsx)(c.Input,{placeholder:st("Rechercher un produit ou scanner un code-barres...","ابحث عن منتج أو امسح رمزاً شريطياً..."),value:ew,onChange:e=>eT(e.target.value),className:"".concat(ss?"pr-10 text-right":"pl-10")})]}),(0,a.jsxs)(c.Button,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>eO(!0),disabled:!eM,children:[(0,a.jsx)(i.ScanLine,{className:"w-4 h-4 ".concat(ss?"ml-2":"mr-2")}),st("Scanner","مسح")]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:W.filter(e=>{var s;return e.stock>0&&(e.name.toLowerCase().includes(ew.toLowerCase())||e.sku.toLowerCase().includes(ew.toLowerCase())||(null==(s=e.barcode)?void 0:s.includes(ew)))}).map(e=>(0,a.jsx)(c.Card,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>su(e),children:(0,a.jsxs)(c.CardContent,{className:"p-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-muted rounded-lg mb-3 flex items-center justify-center",children:(0,a.jsx)(i.Package,{className:"w-12 h-12 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["SKU: ",e.sku]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-primary",children:[e.sellingPrice," DZD"]}),(0,a.jsx)(c.Badge,{variant:"secondary",children:e.stock})]})]})},e.id))})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsx)(c.CardTitle,{children:"Panier"})}),(0,a.jsxs)(c.CardContent,{className:"space-y-4",children:[ek.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.productName}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.price," DZD"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>sm(e.productId,-1),children:(0,a.jsx)(i.Minus,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,a.jsx)(c.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>sm(e.productId,1),children:(0,a.jsx)(i.Plus,{className:"w-4 h-4"})}),(0,a.jsx)(c.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{var s;return s=e.productId,void eA(ek.filter(e=>e.id!==s))},children:(0,a.jsx)(i.Trash2,{className:"w-4 h-4"})})]})]},e.productId)),0===ek.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(i.ShoppingCart,{className:"w-12 h-12 mx-auto mb-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Panier vide"})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Sous-total:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[sg.toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Label,{className:"text-sm",children:"Remise:"}),(0,a.jsx)(c.Input,{type:"number",value:eB,onChange:e=>eE(Number.parseFloat(e.target.value)||0),className:"h-8"}),(0,a.jsx)("span",{className:"text-sm",children:"DZD"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{className:"text-primary",children:[sj.toFixed(2)," DZD"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.Button,{className:"w-full",onClick:()=>sh("cash"),disabled:0===ek.length,children:[(0,a.jsx)(i.DollarSign,{className:"w-4 h-4 mr-2"}),"Payer en Esp\xe8ces"]}),(0,a.jsx)(c.Button,{className:"w-full bg-transparent",variant:"outline",onClick:()=>sh("card"),disabled:0===ek.length,children:"Payer par Carte"})]})]})]})})]})]}),(0,a.jsxs)(c.TabsContent,{value:"sales",className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Historique des Ventes"}),(0,a.jsx)(c.Card,{children:(0,a.jsxs)(c.CardContent,{className:"p-6",children:[(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{children:"ID"}),(0,a.jsx)(c.TableHead,{children:"Date"}),(0,a.jsx)(c.TableHead,{children:"Articles"}),(0,a.jsx)(c.TableHead,{children:"Sous-total"}),(0,a.jsx)(c.TableHead,{children:"Remise"}),(0,a.jsx)(c.TableHead,{children:"Total"}),(0,a.jsx)(c.TableHead,{children:"Paiement"})]})}),(0,a.jsx)(c.TableBody,{children:M.map(e=>(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableCell,{className:"font-mono text-sm",children:e.id.slice(0,8)}),(0,a.jsx)(c.TableCell,{children:new Date(e.createdAt).toLocaleString("fr-FR")}),(0,a.jsx)(c.TableCell,{children:e.items.length}),(0,a.jsxs)(c.TableCell,{children:[e.subtotal.toFixed(2)," DZD"]}),(0,a.jsxs)(c.TableCell,{children:[e.discount.toFixed(2)," DZD"]}),(0,a.jsxs)(c.TableCell,{className:"font-bold",children:[e.total.toFixed(2)," DZD"]}),(0,a.jsx)(c.TableCell,{children:(0,a.jsx)(c.Badge,{variant:"cash"===e.paymentMethod?"default":"secondary",children:"cash"===e.paymentMethod?"Esp\xe8ces":"Carte"})})]},e.id))})]}),0===M.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.Receipt,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground",children:"Aucune vente enregistr\xe9e"})]})]})})]}),(0,a.jsxs)(c.TabsContent,{value:"customers",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestion des Clients"}),(0,a.jsxs)(c.Button,{onClick:()=>k(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Ajouter un Client"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(e=>(0,a.jsx)(c.Card,{children:(0,a.jsxs)(c.CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(i.Users,{className:"w-6 h-6 text-primary"})}),(0,a.jsxs)(c.Badge,{children:[e.totalPurchases.toFixed(2)," DZD"]})]}),(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.name}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:e.phone}),e.email&&(0,a.jsx)("p",{children:e.email}),e.lastPurchaseDate&&(0,a.jsxs)("p",{className:"text-xs",children:["Dernier achat: ",new Date(e.lastPurchaseDate).toLocaleDateString("fr-FR")]})]})]})},e.id))}),0===U.length&&(0,a.jsx)(c.Card,{children:(0,a.jsxs)(c.CardContent,{className:"p-12 text-center",children:[(0,a.jsx)(i.Users,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Aucun client enregistr\xe9"}),(0,a.jsxs)(c.Button,{onClick:()=>k(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Ajouter votre premier client"]})]})})]}),(0,a.jsxs)(c.TabsContent,{value:"suppliers",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gestion des Fournisseurs"}),(0,a.jsxs)(c.Button,{onClick:()=>P(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Ajouter un Fournisseur"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.map(e=>(0,a.jsx)(c.Card,{children:(0,a.jsx)(c.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)(i.Truck,{className:"w-6 h-6 text-orange-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["Contact: ",e.contactPerson]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"T\xe9l:"}),(0,a.jsx)("span",{children:e.phone})]}),e.email&&(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,a.jsx)("span",{children:e.email})]})]})]})]})})},e.id))}),0===G.length&&(0,a.jsx)(c.Card,{children:(0,a.jsxs)(c.CardContent,{className:"p-12 text-center",children:[(0,a.jsx)(i.Truck,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Aucun fournisseur enregistr\xe9"}),(0,a.jsxs)(c.Button,{onClick:()=>P(!0),children:[(0,a.jsx)(i.Plus,{className:"w-4 h-4 mr-2"}),"Ajouter votre premier fournisseur"]})]})})]}),(0,a.jsxs)(c.TabsContent,{value:"ai",className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Insights Aliment\xe9s par l'IA"}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.TrendingUp,{className:"w-5 h-5"}),"Pr\xe9visions des Ventes"]})}),(0,a.jsx)(c.CardContent,{children:ex?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Semaine Prochaine"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[null==(e=ex.week)?void 0:e.toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Mois Prochain"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[null==(s=ex.month)?void 0:s.toFixed(2)," DZD"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["up"===ex.trend?(0,a.jsx)(i.TrendingUp,{className:"w-5 h-5 text-green-500"}):"down"===ex.trend?(0,a.jsx)(i.TrendingDown,{className:"w-5 h-5 text-red-500"}):null,(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Tendance:"," ","up"===ex.trend?"Hausse":"down"===ex.trend?"Baisse":"Stable"]})]})]}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"Donn\xe9es insuffisantes pour les pr\xe9visions"})})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Package,{className:"w-5 h-5"}),"Recommandations de R\xe9approvisionnement"]})}),(0,a.jsx)(c.CardContent,{children:eg.length>0?(0,a.jsx)("div",{className:"space-y-3",children:eg.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.productName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.reason})]}),(0,a.jsxs)(c.Badge,{children:["Commander ",e.recommendedQuantity]})]},e.productId))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"Aucune recommandation pour le moment"})})]}),(0,a.jsxs)(c.Card,{children:[(0,a.jsx)(c.CardHeader,{children:(0,a.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.ShoppingBag,{className:"w-5 h-5"}),"Suggestions de Bundles"]})}),(0,a.jsx)(c.CardContent,{children:ev.length>0?(0,a.jsx)("div",{className:"space-y-3",children:ev.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("p",{className:"font-medium mb-2",children:["Bundle #",s+1]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Achet\xe9 ensemble ",e.frequency," fois"]}),(0,a.jsxs)(c.Badge,{variant:"secondary",children:["Remise sugg\xe9r\xe9e: ",e.suggestedDiscount,"%"]})]},s))}):(0,a.jsx)("p",{className:"text-muted-foreground",children:"Aucune suggestion de bundle pour le moment"})})]})]})]})]}),(0,a.jsx)(c.Dialog,{open:T,onOpenChange:D,children:(0,a.jsxs)(c.DialogContent,{className:"max-w-2xl",children:[(0,a.jsx)(c.DialogHeader,{children:(0,a.jsx)(c.DialogTitle,{children:eL?"Modifier le Produit":"Ajouter un Produit"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"SKU"}),(0,a.jsx)(c.Input,{value:eo.sku,onChange:e=>eu({...eo,sku:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Nom du Produit"}),(0,a.jsx)(c.Input,{value:eo.name,onChange:e=>eu({...eo,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Cat\xe9gorie"}),(0,a.jsx)(c.Input,{value:eo.category,onChange:e=>eu({...eo,category:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Code-barres"}),(0,a.jsx)(c.Input,{value:eo.barcode,onChange:e=>eu({...eo,barcode:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Prix Co\xfbt (DZD)"}),(0,a.jsx)(c.Input,{type:"number",value:eo.costPrice,onChange:e=>eu({...eo,costPrice:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Prix Vente (DZD)"}),(0,a.jsx)(c.Input,{type:"number",value:eo.sellingPrice,onChange:e=>eu({...eo,sellingPrice:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Stock Initial"}),(0,a.jsx)(c.Input,{type:"number",value:eo.stock,onChange:e=>eu({...eo,stock:Number(e.target.value)})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Seuil Stock Faible"}),(0,a.jsx)(c.Input,{type:"number",value:eo.lowStockThreshold,onChange:e=>eu({...eo,lowStockThreshold:Number(e.target.value)})})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)(c.Label,{children:"Photo du Produit (URL)"}),(0,a.jsx)(c.Input,{type:"url",placeholder:"https://exemple.com/produit.jpg ou /placeholder.jpg",value:eo.image,onChange:e=>eu({...eo,image:e.target.value})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL de l'image du produit. Cette photo sera visible dans l'inventaire et pour les clients."}),eo.image&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("img",{src:eo.image,alt:"Aper\xe7u",className:"w-32 h-32 object-cover rounded-lg border",onError:e=>{e.target.src="/placeholder.jpg"}})})]})]}),(0,a.jsxs)(c.DialogFooter,{children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>D(!1),children:"Annuler"}),(0,a.jsx)(c.Button,{onClick:sd,children:"Enregistrer"})]})]})}),(0,a.jsx)(c.Dialog,{open:S,onOpenChange:k,children:(0,a.jsxs)(c.DialogContent,{children:[(0,a.jsx)(c.DialogHeader,{children:(0,a.jsx)(c.DialogTitle,{children:"Ajouter un Client"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Nom"}),(0,a.jsx)(c.Input,{value:em.name,onChange:e=>eh({...em,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"T\xe9l\xe9phone"}),(0,a.jsx)(c.Input,{value:em.phone,onChange:e=>eh({...em,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Email (optionnel)"}),(0,a.jsx)(c.Input,{type:"email",value:em.email,onChange:e=>eh({...em,email:e.target.value})})]})]}),(0,a.jsxs)(c.DialogFooter,{children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>k(!1),children:"Annuler"}),(0,a.jsx)(c.Button,{onClick:sx,children:"Enregistrer"})]})]})}),(0,a.jsx)(c.Dialog,{open:A,onOpenChange:P,children:(0,a.jsxs)(c.DialogContent,{children:[(0,a.jsx)(c.DialogHeader,{children:(0,a.jsx)(c.DialogTitle,{children:"Ajouter un Fournisseur"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Nom de l'Entreprise"}),(0,a.jsx)(c.Input,{value:eD.name,onChange:e=>eS({...eD,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Personne de Contact"}),(0,a.jsx)(c.Input,{value:eD.contactPerson,onChange:e=>eS({...eD,contactPerson:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"T\xe9l\xe9phone"}),(0,a.jsx)(c.Input,{value:eD.phone,onChange:e=>eS({...eD,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Email (optionnel)"}),(0,a.jsx)(c.Input,{type:"email",value:eD.email,onChange:e=>eS({...eD,email:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Adresse (optionnel)"}),(0,a.jsx)(c.Textarea,{value:eD.address,onChange:e=>eS({...eD,address:e.target.value})})]})]}),(0,a.jsxs)(c.DialogFooter,{children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>P(!1),children:"Annuler"}),(0,a.jsx)(c.Button,{onClick:sp,children:"Enregistrer"})]})]})}),(0,a.jsx)(c.Dialog,{open:I,onOpenChange:B,children:(0,a.jsxs)(c.DialogContent,{children:[(0,a.jsx)(c.DialogHeader,{children:(0,a.jsx)(c.DialogTitle,{children:"Re\xe7u de Vente"})}),eH&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center border-b pb-4",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:"ERP - Gestion de Boutique"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Re\xe7u #",eH.id.slice(0,8)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(eH.createdAt).toLocaleString("fr-FR")})]}),(0,a.jsx)("div",{className:"space-y-2",children:eH.items.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[e.quantity,"x ",e.productName]}),(0,a.jsxs)("span",{children:[(e.price*e.quantity).toFixed(2)," DZD"]})]},s))}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Sous-total:"}),(0,a.jsxs)("span",{children:[eH.subtotal.toFixed(2)," DZD"]})]}),eH.discount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,a.jsx)("span",{children:"Remise:"}),(0,a.jsxs)("span",{children:["-",eH.discount.toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total:"}),(0,a.jsxs)("span",{children:[eH.total.toFixed(2)," DZD"]})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["Paiement: ","cash"===eH.paymentMethod?"Esp\xe8ces":"Carte"]})]})]}),(0,a.jsxs)(c.DialogFooter,{children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>B(!1),children:"Fermer"}),(0,a.jsxs)(c.Button,{onClick:()=>window.print(),children:[(0,a.jsx)(i.Printer,{className:"w-4 h-4 mr-2"}),"Imprimer"]})]})]})}),(0,a.jsx)(c.Dialog,{open:ey,onOpenChange:eC,children:(0,a.jsxs)(c.DialogContent,{children:[(0,a.jsx)(c.DialogHeader,{children:(0,a.jsx)(c.DialogTitle,{children:"Capturez une image du produit"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Camera,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Appuyez sur le bouton ci-dessous pour capturer une image"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)(c.Button,{onClick:()=>eC(!1),className:"w-full",children:[(0,a.jsx)(i.Camera,{className:"w-4 h-4 mr-2"}),"Capturer l'image"]})})]})]})})]})}},252:(e,s,t)=>{"use strict";t.r(s),t.d(s,{playNotificationSound:()=>a,playSuccessSound:()=>r});let a=()=>{let e=new(window.AudioContext||window.webkitAudioContext),s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,e.currentTime),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),s.start(e.currentTime),s.stop(e.currentTime+.5)},r=()=>{let e=new(window.AudioContext||window.webkitAudioContext);[523.25,659.25,783.99].forEach((s,t)=>{let a=e.createOscillator(),r=e.createGain();a.connect(r),r.connect(e.destination),a.frequency.value=s,a.type="sine",r.gain.setValueAtTime(.2,e.currentTime+.1*t),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1*t+.3),a.start(e.currentTime+.1*t),a.stop(e.currentTime+.1*t+.3)})}},253:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AlertTriangle:()=>a.default,BarChart3:()=>r.default,Camera:()=>n.default,DollarSign:()=>l.default,Edit:()=>i.default,History:()=>c.default,LayoutDashboard:()=>d.default,Minus:()=>o.default,Package:()=>u.default,Plus:()=>m.default,Printer:()=>h.default,Receipt:()=>x.default,ScanLine:()=>p.default,Search:()=>g.default,ShoppingBag:()=>j.default,ShoppingCart:()=>v.default,Trash2:()=>f.default,TrendingDown:()=>b.default,TrendingUp:()=>N.default,Truck:()=>y.default,Users:()=>C.default});var a=t(254),r=t(259),n=t(260),l=t(261),i=t(262),c=t(263),d=t(264),o=t(265),u=t(266),m=t(267),h=t(268),x=t(269),p=t(270),g=t(271),j=t(272),v=t(273),f=t(274),b=t(275),N=t(276),y=t(277),C=t(278)},279:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Badge:()=>n.Badge,Button:()=>a.Button,Card:()=>r.Card,CardContent:()=>r.CardContent,CardDescription:()=>r.CardDescription,CardFooter:()=>r.CardFooter,CardHeader:()=>r.CardHeader,CardTitle:()=>r.CardTitle,Dialog:()=>d.Dialog,DialogContent:()=>d.DialogContent,DialogDescription:()=>d.DialogDescription,DialogFooter:()=>d.DialogFooter,DialogHeader:()=>d.DialogHeader,DialogTitle:()=>d.DialogTitle,DialogTrigger:()=>d.DialogTrigger,Input:()=>l.Input,Label:()=>i.Label,Select:()=>m.Select,SelectContent:()=>m.SelectContent,SelectItem:()=>m.SelectItem,SelectTrigger:()=>m.SelectTrigger,SelectValue:()=>m.SelectValue,Table:()=>o.Table,TableBody:()=>o.TableBody,TableCell:()=>o.TableCell,TableHead:()=>o.TableHead,TableHeader:()=>o.TableHeader,TableRow:()=>o.TableRow,Tabs:()=>u.Tabs,TabsContent:()=>u.TabsContent,TabsList:()=>u.TabsList,TabsTrigger:()=>u.TabsTrigger,Textarea:()=>c.Textarea,Toaster:()=>h.Toaster,toast:()=>x.toast,useToast:()=>x.useToast});var a=t(280),r=t(287),n=t(288),l=t(289),i=t(290),c=t(293),d=t(294),o=t(348),u=t(349),m=t(361),h=t(378),x=t(382)},280:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Button:()=>c,buttonVariants:()=>i});var a=t(113);t(121);var r=t(281),n=t(283),l=t(285);let i=(0,n.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:s,variant:t,size:n,asChild:c=!1,...d}=e,o=c?r.Slot:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,l.cn)(i({variant:t,size:n,className:s})),...d})}},287:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Card:()=>n,CardAction:()=>d,CardContent:()=>o,CardDescription:()=>c,CardFooter:()=>u,CardHeader:()=>l,CardTitle:()=>i});var a=t(113);t(121);var r=t(285);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-action",className:(0,r.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},288:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Badge:()=>c,badgeVariants:()=>i});var a=t(113);t(121);var r=t(281),n=t(283),l=t(285);let i=(0,n.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,asChild:n=!1,...c}=e,d=n?r.Slot:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,l.cn)(i({variant:t}),s),...c})}},289:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Input:()=>n});var a=t(113);t(121);var r=t(285);function n(e){let{className:s,type:t,...n}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}},293:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Textarea:()=>n});var a=t(113);t(121);var r=t(285);function n(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}},383:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(113),r=t(121),n=t(280),l=t(384),i=t(387),c=t(393);function d(e){let{title:s="AL-baz",subtitle:t="Delivery",showRefresh:d=!1,onRefresh:o,language:u,setLanguage:m,isDarkMode:h,setIsDarkMode:x}=e,[p,g]=(0,r.useState)((0,c.getStoredTheme)()),[j,v]=(0,r.useState)((0,c.getStoredLanguage)()),[f,b]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{b(!0),g((0,c.getStoredTheme)()),v((0,c.getStoredLanguage)())},[]),!f)return null;let N="dark"===p||"system"===p&&window.matchMedia("(prefers-color-scheme: dark)").matches;return(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-primary to-orange-500 text-white shadow-lg",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"AL-baz",className:"h-10 w-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:s}),(0,a.jsx)("p",{className:"text-xs text-white/80",children:t})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[d&&o&&(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:o,title:"Refresh",children:(0,a.jsx)(i.RefreshCw,{className:"w-5 h-5"})}),(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>{let e=(0,c.toggleLanguage)();v(e),null==m||m(e)},title:"fr"===j?"العربية":"Fran\xe7ais",children:(0,a.jsx)(i.Globe,{className:"w-5 h-5"})}),(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>{let e=(0,c.toggleTheme)();g(e),null==x||x("dark"===e)},title:N?"Light mode":"Dark mode",children:N?(0,a.jsx)(i.Sun,{className:"w-5 h-5"}):(0,a.jsx)(i.Moon,{className:"w-5 h-5"})}),(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>(0,l.signOut)({callbackUrl:"/login"}),title:"Sign out",children:(0,a.jsx)(i.LogOut,{className:"w-5 h-5"})})]})]})})})}},387:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Globe:()=>a.default,LogOut:()=>r.default,Moon:()=>n.default,RefreshCw:()=>l.default,Sun:()=>i.default});var a=t(388),r=t(389),n=t(390),l=t(391),i=t(392)},394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{useAuth:()=>n});var a=t(384),r=t(121);function n(){let{data:e,status:s}=(0,a.useSession)(),[t,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{"loading"!==s&&n(!1)},[s]),{user:null==e?void 0:e.user,isAuthenticated:!!(null==e?void 0:e.user),isLoading:t,session:e,status:s}}},395:(e,s,t)=>{"use strict";t.r(s),t.d(s,{useDashboardData:()=>n});var a=t(121),r=t(396);function n(){let[e,s]=(0,a.useState)({sales:!1,customers:!1,suppliers:!1,products:!1,orders:!1,categories:!1,dashboard:!1,inventory:!1}),t=(0,a.useCallback)(e=>{s(e)},[]),{fetchData:n,fetchWithCache:l}=(0,r.useFetchWithCache)(),i=(e,s)=>{if(!s)return e;let t=e.includes("?")?"&":"?";return"".concat(e).concat(t,"vendorId=").concat(s)},c=(e,s)=>s?"".concat(e,":").concat(s):e;return{loadingState:e,setLoadingState:t,fetchWithCache:l,fetchSales:async e=>{let s=i("/api/erp/sales",e),t=c("sales",e),a=await n("sales",s,t,e=>({sales:(Array.isArray(e.sales)?e.sales:[]).map(e=>({...e,paymentMethod:(e.paymentMethod||"cash").toString().toLowerCase()}))}));return(null==a?void 0:a.sales)||[]},fetchCustomers:async e=>{let s=i("/api/erp/customers",e),t=c("customers",e),a=await n("customers",s,t,e=>({customers:Array.isArray(e.customers)?e.customers:[]}));return(null==a?void 0:a.customers)||[]},fetchSuppliers:async e=>{let s=i("/api/erp/suppliers",e),t=c("suppliers",e),a=await n("suppliers",s,t,e=>({suppliers:Array.isArray(e.suppliers)?e.suppliers:[]}));return(null==a?void 0:a.suppliers)||[]},fetchProducts:async e=>{let s=i("/api/erp/inventory",e),t=c("products",e),a=await n("products",s,t,e=>({products:Array.isArray(e.products)?e.products:[]}));return(null==a?void 0:a.products)||[]},fetchOrders:async e=>{let s=i("/api/vendors/orders",e),t=c("orders",e),a=await n("orders",s,t,e=>({orders:Array.isArray(e.orders)?e.orders:[]}));return(null==a?void 0:a.orders)||[]},fetchCategories:async e=>{let s=i("/api/erp/categories",e),t=c("categories",e),a=await n("categories",s,t,e=>({categories:Array.isArray(e.categories)?e.categories:[]}));return(null==a?void 0:a.categories)||[]}}}},396:(e,s,t)=>{"use strict";t.r(s),t.d(s,{useFetchWithCache:()=>l});var a=t(121),r=t(397),n=t(398);function l(){let{toast:e}=(0,r.useToast)(),[s,t]=(0,a.useState)({sales:!1,customers:!1,suppliers:!1,products:!1,orders:!1,categories:!1,dashboard:!1,inventory:!1});return{loadingState:s,fetchData:async(s,a,r,l)=>{t(e=>({...e,[s]:!0}));let i=(0,n.getCachedData)(r);if(i)return l?l(i):i;try{let e=await fetch(a),s=await e.json();if(!s.success)throw Error("Failed to fetch data");return(0,n.setCachedData)(r,s.data),l?l(s.data):s.data}catch(a){console.error("[v0] Error fetching ".concat(s,":"),a),e({title:"Erreur des ".concat(s),description:"Impossible de charger la liste des ".concat(s,". R\xe9essayez plus tard."),variant:"destructive"});let t=(0,n.getCachedData)(r);if(t)return l?l(t):t;return null}finally{t(e=>({...e,[s]:!1}))}},fetchWithCache:async(e,s)=>{let t=(0,n.getCachedData)(e);if(t)return t;let a=await fetch(s),r=await a.json();if(!r.success)throw Error("Failed to fetch data");return(0,n.setCachedData)(e,r.data),r.data}}}},397:(e,s,t)=>{"use strict";t.r(s),t.d(s,{reducer:()=>a.reducer,toast:()=>a.toast,useToast:()=>a.useToast});var a=t(382)},398:(e,s,t)=>{"use strict";function a(e){try{let s=localStorage.getItem("cache_".concat(e));if(!s)return null;let{data:t,timestamp:a}=JSON.parse(s);if(Date.now()-a>3e5)return localStorage.removeItem("cache_".concat(e)),null;return t}catch(e){return console.error("[Cache] Error reading cached data:",e),null}}function r(e,s){try{localStorage.setItem("cache_".concat(e),JSON.stringify({data:s,timestamp:Date.now()}))}catch(e){console.error("[Cache] Error setting cached data:",e)}}async function n(e,s){try{let t=a(s);if(t)return{success:!0,data:t};let n=await fetch(e),l=await n.json();return l.success&&r(s,l.data),l}catch(t){console.error("[Cache] Error fetching with cache:",t);let e=a(s);if(e)return{success:!0,data:e};throw t}}t.r(s),t.d(s,{fetchWithCache:()=>n,getCachedData:()=>a,setCachedData:()=>r})},399:(e,s,t)=>{"use strict";async function a(e){let s=await fetch(e);if(!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));return s.json()}async function r(e){let s=s=>{if(!e)return s;let t=s.includes("?")?"&":"?";return"".concat(s).concat(t,"vendorId=").concat(e)},[t,r,n,l,i,c]=await Promise.all([a(s("/api/erp/sales")),a(s("/api/vendors/orders")),a(s("/api/erp/inventory")),a(s("/api/erp/customers")),a(s("/api/erp/suppliers")),a(s("/api/erp/categories"))]);return{salesData:Array.isArray(null==t?void 0:t.sales)?t.sales:[],ordersData:Array.isArray(null==r?void 0:r.orders)?r.orders:[],productsData:Array.isArray(null==n?void 0:n.products)?n.products:[],customersData:Array.isArray(null==l?void 0:l.customers)?l.customers:[],suppliersData:Array.isArray(null==i?void 0:i.suppliers)?i.suppliers:[],categoriesData:Array.isArray(null==c?void 0:c.categories)?c.categories:[]}}async function n(e){let s=s=>{if(!e)return s;let t=s.includes("?")?"&":"?";return"".concat(s).concat(t,"vendorId=").concat(e)},[t,r]=await Promise.all([a(s("/api/erp/inventory")),a(s("/api/erp/categories"))]);return{products:Array.isArray(null==t?void 0:t.products)?t.products:[],categories:Array.isArray(null==r?void 0:r.categories)?r.categories:[]}}t.r(s),t.d(s,{fetchDashboardData:()=>r,fetchInventory:()=>n})}},e=>{e.O(0,[96,33,587,358],()=>e(e.s=249)),_N_E=e.O()}]);