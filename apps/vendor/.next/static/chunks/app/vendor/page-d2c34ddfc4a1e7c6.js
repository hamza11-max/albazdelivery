(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{6349:(e,s,t)=>{"use strict";t.d(s,{dj:()=>r.useToast});var r=t(43790)},7335:(e,s,t)=>{"use strict";t.d(s,{W:()=>l});var r=t(7620),a=t(6349),n=t(40283);function l(){let{toast:e}=(0,a.dj)(),[s,t]=(0,r.useState)({sales:!1,customers:!1,suppliers:!1,products:!1,orders:!1,categories:!1,dashboard:!1,inventory:!1});return{loadingState:s,fetchData:(0,r.useCallback)(async(s,r,a,l)=>{t(e=>({...e,[s]:!0}));let c=(0,n.hi)(a);if(c)return t(e=>({...e,[s]:!1})),l?l(c):c;let i="error:".concat(a),d=(0,n.hi)(i);if(d&&Date.now()-d.timestamp<6e4){t(e=>({...e,[s]:!1}));let e=(0,n.hi)(a);return e?l?l(e):e:void 0}try{let e=await fetch(r);if(!e.ok){let s=await e.text().catch(()=>"Unknown error");throw Error("HTTP ".concat(e.status,": ").concat(s.substring(0,100)))}let c=e.headers.get("content-type");if(!c||!c.includes("application/json")){let s=await e.text();throw Error("Expected JSON but got ".concat(c,". Response: ").concat(s.substring(0,100)))}let d=await e.json();if(!d.success)throw Error("Failed to fetch data");(0,n.H$)(a,d.data);try{window.localStorage&&window.localStorage.removeItem(i)}catch(e){}return t(e=>({...e,[s]:!1})),l?l(d.data):d.data}catch(c){console.error("[v0] Error fetching ".concat(s,":"),c);try{window.localStorage&&window.localStorage.setItem(i,JSON.stringify({timestamp:Date.now()}))}catch(e){}c instanceof Error&&!c.message.includes("404")&&e({title:"Erreur des ".concat(s),description:"Impossible de charger la liste des ".concat(s,". R\xe9essayez plus tard."),variant:"destructive"});let r=(0,n.hi)(a);if(r)return t(e=>({...e,[s]:!1})),l?l(r):r;t(e=>({...e,[s]:!1}));return}},[e]),fetchWithCache:async(e,s)=>{let t=(0,n.hi)(e);if(t)return t;let r=await fetch(s),a=await r.json();if(!a.success)throw Error("Failed to fetch data");return(0,n.H$)(e,a.data),a.data}}}},11674:(e,s,t)=>{"use strict";async function r(e){let s=await fetch(e);if(!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));return s.json()}async function a(e){let s=s=>{if(!e)return s;let t=s.includes("?")?"&":"?";return"".concat(s).concat(t,"vendorId=").concat(e)},[t,a,n,l,c,i]=await Promise.all([r(s("/api/erp/sales")),r(s("/api/vendors/orders")),r(s("/api/erp/inventory")),r(s("/api/erp/customers")),r(s("/api/erp/suppliers")),r(s("/api/erp/categories"))]);return{salesData:Array.isArray(null==t?void 0:t.sales)?t.sales:[],ordersData:Array.isArray(null==a?void 0:a.orders)?a.orders:[],productsData:Array.isArray(null==n?void 0:n.products)?n.products:[],customersData:Array.isArray(null==l?void 0:l.customers)?l.customers:[],suppliersData:Array.isArray(null==c?void 0:c.suppliers)?c.suppliers:[],categoriesData:Array.isArray(null==i?void 0:i.categories)?i.categories:[]}}async function n(e){let s=s=>{if(!e)return s;let t=s.includes("?")?"&":"?";return"".concat(s).concat(t,"vendorId=").concat(e)},[t,a]=await Promise.all([r(s("/api/erp/inventory")),r(s("/api/erp/categories"))]);return{products:Array.isArray(null==t?void 0:t.products)?t.products:[],categories:Array.isArray(null==a?void 0:a.categories)?a.categories:[]}}t.d(s,{H:()=>a,J:()=>n})},31471:(e,s,t)=>{"use strict";t.d(s,{e:()=>n});var r=t(7620),a=t(7335);function n(){let[e,s]=(0,r.useState)({sales:!1,customers:!1,suppliers:!1,products:!1,orders:!1,categories:!1,dashboard:!1,inventory:!1}),t=(0,r.useCallback)(e=>{s(e)},[]),{fetchData:n,fetchWithCache:l}=(0,a.W)(),c=(e,s)=>{if(!s)return e;let t=e.includes("?")?"&":"?";return"".concat(e).concat(t,"vendorId=").concat(s)},i=(e,s)=>s?"".concat(e,":").concat(s):e;return{loadingState:e,setLoadingState:t,fetchWithCache:l,fetchSales:async e=>{let s=c("/api/erp/sales",e),t=i("sales",e),r=await n("sales",s,t,e=>({sales:(Array.isArray(e.sales)?e.sales:[]).map(e=>({...e,paymentMethod:(e.paymentMethod||"cash").toString().toLowerCase()}))}));return(null==r?void 0:r.sales)||[]},fetchCustomers:async e=>{let s=c("/api/erp/customers",e),t=i("customers",e),r=await n("customers",s,t,e=>({customers:Array.isArray(e.customers)?e.customers:[]}));return(null==r?void 0:r.customers)||[]},fetchSuppliers:async e=>{let s=c("/api/erp/suppliers",e),t=i("suppliers",e),r=await n("suppliers",s,t,e=>({suppliers:Array.isArray(e.suppliers)?e.suppliers:[]}));return(null==r?void 0:r.suppliers)||[]},fetchProducts:async e=>{let s=c("/api/erp/inventory",e),t=i("products",e),r=await n("products",s,t,e=>({products:Array.isArray(e.products)?e.products:[]}));return(null==r?void 0:r.products)||[]},fetchOrders:async e=>{let s=c("/api/vendors/orders",e),t=i("orders",e),r=await n("orders",s,t,e=>({orders:Array.isArray(e.orders)?e.orders:[]}));return(null==r?void 0:r.orders)||[]},fetchCategories:async e=>{let s=c("/api/erp/categories",e),t=i("categories",e),r=await n("categories",s,t,e=>({categories:Array.isArray(e.categories)?e.categories:[]}));return(null==r?void 0:r.categories)||[]}}}},33492:(e,s,t)=>{"use strict";t.d(s,{b:()=>r});let r=()=>{let e=new(window.AudioContext||window.webkitAudioContext);[523.25,659.25,783.99].forEach((s,t)=>{let r=e.createOscillator(),a=e.createGain();r.connect(a),a.connect(e.destination),r.frequency.value=s,r.type="sine",a.gain.setValueAtTime(.2,e.currentTime+.1*t),a.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1*t+.3),r.start(e.currentTime+.1*t),r.stop(e.currentTime+.1*t+.3)})}},34359:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var r=t(54568),a=t(7620),n=t(27541),l=t(33492),c=t(50741),i=t(25438),d=t(70415),o=t(14502),u=t(84990),m=t(45801),x=t(81983),h=t(3094),p=t(24643),j=t(74717),g=t(12494),v=t(2043),f=t(54925),N=t(2167),y=t(65202),w=t(89256),b=t(10614),A=t(36602),C=t(53502),S=t(94193),k=t(6450),D=t(10194),E=t(43790),P=t(53486),I=t(67729),Z=t(31471),T=t(11674);function F(){var e,s;let t=(0,n.useRouter)(),{isAuthenticated:F,user:R,isLoading:$,status:U}=(0,I.A)(),{toast:J}=(0,E.useToast)(),[L,O]=(0,a.useState)(!1),[q,M]=(0,a.useState)("dashboard"),[V,W]=(0,a.useState)("fr"),[z,B]=(0,a.useState)(!1),[H,_]=(0,a.useState)(!1),[G,X]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),{loadingState:Y,setLoadingState:ee,fetchWithCache:es,fetchSales:et,fetchCustomers:er,fetchSuppliers:ea,fetchProducts:en,fetchOrders:el,fetchCategories:ec}=(0,Z.e)(),[ei,ed]=(0,a.useState)([]),[eo,eu]=(0,a.useState)([]),[em,ex]=(0,a.useState)([]),[eh,ep]=(0,a.useState)([]),[ej,eg]=(0,a.useState)([]),[ev,ef]=(0,a.useState)([]),[eN,ey]=(0,a.useState)([]),[ew,eb]=(0,a.useState)(0),[eA,eC]=(0,a.useState)(0),[eS,ek]=(0,a.useState)(0),[eD,eE]=(0,a.useState)([]),[eP,eI]=(0,a.useState)({sku:"",name:"",category:"",description:"",supplierId:"",costPrice:"",sellingPrice:"",price:"",stock:0,lowStockThreshold:0,barcode:"",image:""}),[eZ,eT]=(0,a.useState)({name:"",email:"",phone:"",address:""}),[eF,eR]=(0,a.useState)(null),[e$,eU]=(0,a.useState)([]),[eJ,eL]=(0,a.useState)([]),[eO,eq]=(0,a.useState)(null),[eM,eV]=(0,a.useState)(!1),[eW,ez]=(0,a.useState)(""),[eB,eH]=(0,a.useState)({name:"",contactPerson:"",phone:"",email:"",address:""}),[e_,eG]=(0,a.useState)([]),[eX,eK]=(0,a.useState)(null),[eQ,eY]=(0,a.useState)(0),[e0,e2]=(0,a.useState)(null),[e1,e4]=(0,a.useState)(null),[e5,e3]=(0,a.useState)(!1),[e6,e8]=(0,a.useState)(null),[e7,e9]=(0,a.useState)(!1),se=(0,a.useRef)(null),ss=(0,a.useRef)(null),st=(0,a.useRef)(),sr=(0,a.useRef)(null),sa=(0,a.useRef)(null),sn=(0,a.useRef)(null),sl=(0,a.useRef)(null),[sc,si]=(0,a.useState)(null),[sd,so]=(0,a.useState)(null),[su,sm]=(0,a.useState)(!1),[sx,sh]=(0,a.useState)(!1),[sp,sj]=(0,a.useState)([]),[sg,sv]=(0,a.useState)(null),[sf,sN]=(0,a.useState)(!1),sy=(0,a.useMemo)(()=>"ar"===V,[V]),sw=(0,a.useCallback)((e,s)=>"ar"===V?s:e,[V]),sb=(0,a.useMemo)(()=>sx&&null!=sg?sg:void 0,[sx,sg]),sA=(0,a.useMemo)(()=>e_.reduce((e,s)=>e+s.price*s.quantity,0),[e_]),sC=(0,a.useMemo)(()=>sA-eQ,[sA,eQ]),sS=(0,a.useCallback)(e=>{eG(s=>s.find(s=>s.id===e.id)?s.map(s=>s.id===e.id?{...s,quantity:s.quantity+1}:s):[...s,{id:e.id,productId:e.id,productName:e.name,quantity:1,price:e.sellingPrice||0,discount:0}])},[]);(0,a.useEffect)(()=>{"BarcodeDetector"in window&&e9(!0)},[]);let sk=(0,a.useCallback)(()=>{st.current&&(cancelAnimationFrame(st.current),st.current=void 0),ss.current&&(ss.current.getTracks().forEach(e=>e.stop()),ss.current=null),se.current&&(se.current.srcObject=null)},[]),sD=(0,a.useCallback)(async()=>{if(e8(null),!e7)return void e8(sw("La lecture de code-barres n'est pas prise en charge sur cet appareil.","مسح الباركود غير مدعوم على هذا الجهاز."));try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});ss.current=e,se.current&&(se.current.srcObject=e,await se.current.play()),sr.current=new window.BarcodeDetector({formats:["code_128","code_39","ean_13","qr_code","upc_a","upc_e"]});let s=async()=>{if(!sr.current||!se.current){st.current=requestAnimationFrame(s);return}try{let s=await sr.current.detect(se.current);if(null==s?void 0:s.length){var e;let t=null==(e=s[0])?void 0:e.rawValue;if(t){ez(t);let e=eh.find(e=>e.barcode===t);e?(sS(e),(0,l.b)(),J({title:sw("Produit trouv\xe9","تم العثور على المنتج"),description:sw("Le produit a \xe9t\xe9 ajout\xe9 au panier.","تمت إضافة المنتج إلى السلة.")})):J({title:sw("Code-barres inconnu","رمز غير معروف"),description:sw("Aucun produit ne correspond \xe0 ce code-barres.","لا يوجد منتج مطابق لهذا الرمز."),variant:"destructive"}),e3(!1);return}}}catch(e){console.error("[v0] Barcode detection error:",e),e8(sw("Impossible de lire le code-barres.","تعذر قراءة الرمز."))}st.current=requestAnimationFrame(s)};st.current=requestAnimationFrame(s)}catch(e){console.error("[v0] Error starting barcode scanner:",e),e8(sw("Impossible d'acc\xe9der \xe0 la cam\xe9ra.","تعذر الوصول إلى الكاميرا."))}},[sS,e7,eh,J,sw]);(0,a.useEffect)(()=>e5?(sD(),()=>{sk()}):void sk(),[e5,sD,sk]);let sE=(0,a.useCallback)(()=>{sn.current&&(sn.current.getTracks().forEach(e=>e.stop()),sn.current=null),sa.current&&(sa.current.srcObject=null),sm(!1)},[]),sP=(0,a.useCallback)(async()=>{so(null);try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});sn.current=e,sa.current&&(sa.current.srcObject=e,await sa.current.play(),sm(!0))}catch(e){console.error("[v0] Error accessing camera:",e),so(sw("Impossible d'acc\xe9der \xe0 la cam\xe9ra.","تعذر الوصول إلى الكاميرا."))}},[sw]);(0,a.useCallback)(()=>{var e;if(!sa.current)return;let s=sa.current,t=null!=(e=sl.current)?e:document.createElement("canvas");sl.current=t,t.width=s.videoWidth,t.height=s.videoHeight;let r=t.getContext("2d");r&&(r.drawImage(s,0,0,t.width,t.height),si(t.toDataURL("image/jpeg",.9)),(0,l.b)())},[]),(0,a.useEffect)(()=>{if(!eM){sE(),si(null);return}return sP(),()=>sE()},[eM,sP,sE]),(0,a.useEffect)(()=>()=>{sk(),sE()},[sk,sE]);let sI=(0,a.useCallback)(async e=>{try{let[s,t,r,a,n,l]=await Promise.all([et(e),el(e),en(e),er(e),ea(e),ec(e)]);if(s&&ed(s),t&&eg(t),r){ep(r);let e=r.filter(e=>{var s;return e.stock<=(null!=(s=e.lowStockThreshold)?s:10)});ey(e)}if(a&&eu(a),n&&ex(n),l&&ef(l),null==s?void 0:s.length){let e=new Date,t=new Date(e.getTime()-6048e5),a=new Date(e.getTime()-2592e6),n=s.filter(s=>new Date(s.createdAt).toDateString()===e.toDateString()),l=s.filter(e=>new Date(e.createdAt)>=t),c=s.filter(e=>new Date(e.createdAt)>=a);if(eb(n.reduce((e,s)=>e+(s.total||0),0)),eC(l.reduce((e,s)=>e+(s.total||0),0)),ek(c.reduce((e,s)=>e+(s.total||0),0)),r){let e=new Map;s.forEach(s=>s.items.forEach(s=>{let t=e.get(s.productId)||{quantity:0,total:0};e.set(s.productId,{quantity:t.quantity+s.quantity,total:t.total+s.price*s.quantity})}));let t=Array.from(e.entries()).map(e=>{var s;let[t,a]=e;return{productId:t,productName:(null==(s=r.find(e=>e.id===t))?void 0:s.name)||"Unknown",totalQuantity:a.quantity,totalSales:a.total,totalSold:a.quantity}}).sort((e,s)=>s.totalSales-e.totalSales).slice(0,5);eE(t)}}ee(e=>({...e,products:!1,categories:!1,sales:!1,customers:!1,suppliers:!1,orders:!1,dashboard:!1}))}catch(e){console.error("Error loading dashboard data:",e),J({title:sw("Erreur","خطأ"),description:sw("Impossible de charger les donn\xe9es du tableau de bord.","تعذر تحميل بيانات لوحة التحكم."),variant:"destructive"}),ee(e=>({...e,products:!1,categories:!1,sales:!1,customers:!1,suppliers:!1,orders:!1,dashboard:!1}))}},[et,el,en,er,ea,ec,ee,J]),sZ=async()=>{try{let e=e0?"PUT":"POST",s="/api/erp/inventory".concat(sb?"?vendorId=".concat(sb):""),t=await fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...eP,id:null==e0?void 0:e0.id,costPrice:Number.parseFloat(eP.costPrice),sellingPrice:Number.parseFloat(eP.sellingPrice),stock:eP.stock,lowStockThreshold:eP.lowStockThreshold,vendorId:sb})});(await t.json()).success&&((0,T.J)(sb),(0,T.H)(sb),B(!1),e2(null),eI({sku:"",name:"",category:"",description:"",supplierId:"",costPrice:"",sellingPrice:"",price:"",stock:0,lowStockThreshold:0,barcode:"",image:""}),J({title:e0?sw("Produit mis \xe0 jour","تم تحديث المنتج"):sw("Produit ajout\xe9","تمت إضافة المنتج"),description:sw("L'inventaire a \xe9t\xe9 mis \xe0 jour avec succ\xe8s","تم تحديث المخزون بنجاح")}))}catch(e){console.error("[v0] Error saving product:",e)}},sT=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit?"))try{let s="/api/erp/inventory?id=".concat(e).concat(sb?"&vendorId=".concat(sb):""),t=await fetch(s,{method:"DELETE"});(await t.json()).success&&((0,T.J)(sb),J({title:sw("Produit supprim\xe9","تم حذف المنتج"),description:sw("Le produit a \xe9t\xe9 supprim\xe9 de l'inventaire","تم حذف المنتج من المخزون.")}))}catch(e){console.error("[v0] Error deleting product:",e)}},sF=(e,s)=>{eG(e_.map(t=>t.productId===e?{...t,quantity:Math.max(0,t.quantity+s)}:t).filter(e=>e.quantity>0))},sR=async e=>{if(0===e_.length)return void J({title:sw("Panier vide","السلة فارغة"),description:sw("Ajoutez des produits au panier avant de finaliser la vente","أضِف منتجات إلى السلة قبل إتمام عملية البيع."),variant:"destructive"});let s=e_.reduce((e,s)=>e+s.price*s.quantity,0),t=s-eQ;try{let r="/api/erp/sales".concat(sb?"?vendorId=".concat(sb):""),a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:eX||void 0,items:e_,subtotal:s,discount:eQ,total:t,paymentMethod:e,vendorId:sb})}),n=await a.json();n.success&&(e4(n.sale),Q(!0),eG([]),eY(0),eK(null),(0,T.H)(sb),(0,T.J)(sb),et(sb),J({title:sw("Vente compl\xe9t\xe9e","تمت العملية"),description:sy?"تم تسجيل عملية بيع بقيمة ".concat(t.toFixed(2)," ").concat(sw("DZD","دج"),"."):"Vente de ".concat(t.toFixed(2)," ").concat(sw("DZD","دج")," enregistr\xe9e avec succ\xe8s.")}))}catch(e){console.error("[v0] Error completing sale:",e)}},s$=async()=>{try{let e=await fetch("/api/erp/customers".concat(sb?"?vendorId=".concat(sb):""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(eZ)});(await e.json()).success&&(er(sb),_(!1),eT({name:"",email:"",phone:"",address:""}),J({title:sw("Client ajout\xe9","تم إضافة العميل"),description:sw("Le client a \xe9t\xe9 ajout\xe9 avec succ\xe8s","تمت إضافة العميل بنجاح.")}))}catch(e){console.error("[v0] Error saving customer:",e)}},sU=async()=>{try{let e=await fetch("/api/erp/suppliers".concat(sb?"?vendorId=".concat(sb):""),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...eB,vendorId:sb})});(await e.json()).success&&(ea(sb),X(!1),eH({name:"",contactPerson:"",phone:"",email:"",address:""}),J({title:sw("Fournisseur ajout\xe9","تم إضافة المورد"),description:sw("Le fournisseur a \xe9t\xe9 ajout\xe9 avec succ\xe8s","تمت إضافة المورد بنجاح.")}))}catch(e){console.error("[v0] Error saving supplier:",e)}};return((0,a.useEffect)(()=>{if("loading"===U)return;if(!F||!R)return void t.push("/login");let e="ADMIN"===R.role,s="VENDOR"===R.role;if(!e&&!s)return void t.push("/login");sh(e),e||sv(null)},[U,F,R,t]),(0,a.useEffect)(()=>{if(!sx)return void sj([]);let e=new AbortController;return(async()=>{try{sN(!0);let s=await fetch("/api/admin/users?role=VENDOR&status=APPROVED&limit=500",{signal:e.signal}),t=await s.json();if(null==t?void 0:t.success){let e=Array.isArray(t.users)?t.users.map(e=>({id:e.id,name:e.name||e.email||"Vendor"})):[];sj(e),e.length&&!sg&&sv(e[0].id)}}catch(e){"AbortError"!==e.name&&(console.error("[v0] Failed to load vendors:",e),J({title:sw("Erreur","خطأ"),description:sw("Impossible de charger la liste des vendeurs.","تعذر تحميل قائمة التجار."),variant:"destructive"}))}finally{sN(!1)}})(),()=>e.abort()},[sx,sg,J,sw]),(0,a.useEffect)(()=>{"loading"!==U&&F&&(!sx||sg)&&sI(sx&&null!=sg?sg:void 0)},[U,F,sx,sg,sI]),(0,a.useEffect)(()=>{L?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[L]),$||"loading"===U)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):F&&R?(0,r.jsxs)("div",{className:"min-h-screen bg-background",dir:sy?"rtl":"ltr",children:[(0,r.jsx)(P.A,{language:V,setLanguage:W,isDarkMode:L,setIsDarkMode:O}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-6",dir:sy?"rtl":"ltr",children:[sx&&(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:sw("Mode administrateur","وضع المسؤول")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:sw("S\xe9lectionnez un vendeur pour consulter et g\xe9rer ses donn\xe9es.","اختر تاجراً لعرض بياناته وإدارتها.")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JU,{className:"text-sm font-medium",children:sw("Vendeur","التاجر")}),(0,r.jsxs)("select",{className:"h-10 rounded-md border px-3 text-sm bg-background",value:null!=sg?sg:"",onChange:e=>sv(e.target.value||null),disabled:sf||0===sp.length,children:[0===sp.length&&(0,r.jsx)("option",{value:"",children:sf?sw("Chargement...","جار التحميل..."):sw("Aucun vendeur disponible","لا يوجد تجار متاحون")}),sp.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)(D.tU,{value:q,onValueChange:M,children:[(0,r.jsxs)(D.j7,{className:"grid w-full grid-cols-7 mb-6",children:[(0,r.jsxs)(D.Xi,{value:"dashboard",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),sw("Tableau de bord","لوحة التحكم")]}),(0,r.jsxs)(D.Xi,{value:"inventory",children:[(0,r.jsx)(i.A,{className:"w-4 h-4 mr-2"}),sw("Inventaire","المخزون")]}),(0,r.jsxs)(D.Xi,{value:"pos",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),sw("Point de Vente","نقطة البيع")]}),(0,r.jsxs)(D.Xi,{value:"sales",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 mr-2"}),sw("Ventes","المبيعات")]}),(0,r.jsxs)(D.Xi,{value:"customers",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),sw("Clients","العملاء")]}),(0,r.jsxs)(D.Xi,{value:"suppliers",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),sw("Fournisseurs","الموردون")]}),(0,r.jsxs)(D.Xi,{value:"ai",children:[(0,r.jsx)(x.A,{className:"w-4 h-4 mr-2"}),sw("Analyse IA","تحليلات الذكاء الاصطناعي")]})]}),(0,r.jsxs)(D.av,{value:"dashboard",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{className:"pb-3",children:(0,r.jsx)(D.ZB,{className:"text-sm font-medium text-muted-foreground",children:sw("Ventes d'aujourd'hui","مبيعات اليوم")})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold",children:[ew.toFixed(2)," ",sw("DZD","دج")]}),(0,r.jsx)(h.A,{className:"w-8 h-8 text-green-500"})]})})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{className:"pb-3",children:(0,r.jsx)(D.ZB,{className:"text-sm font-medium text-muted-foreground",children:sw("Ventes cette semaine","مبيعات هذا الأسبوع")})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold",children:[eA.toFixed(2)," ",sw("DZD","دج")]}),(0,r.jsx)(p.A,{className:"w-8 h-8 text-blue-500"})]})})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{className:"pb-3",children:(0,r.jsx)(D.ZB,{className:"text-sm font-medium text-muted-foreground",children:sw("Ventes ce mois","مبيعات هذا الشهر")})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold",children:[eS.toFixed(2)," ",sw("DZD","دج")]}),(0,r.jsx)(x.A,{className:"w-8 h-8 text-purple-500"})]})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsx)(D.ZB,{children:sw("Produits les plus vendus","المنتجات الأكثر مبيعاً")})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[eD.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-bold text-primary",children:s+1})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.productName}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.totalQuantity," ",sw("vendus","تم بيعها")]})]})]}),(0,r.jsx)(p.A,{className:"w-5 h-5 text-green-500"})]},e.productId)),0===eD.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:sw("Aucune vente enregistr\xe9e","لا توجد مبيعات مسجلة")})]})})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsxs)(D.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(j.A,{className:"w-5 h-5 text-orange-500"}),sw("Alertes stock faible","تنبيهات انخفاض المخزون")]})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[eN.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[sw("R\xe9f\xe9rence","المرجع"),": ",e.sku]})]}),(0,r.jsxs)(D.Ex,{variant:"destructive",children:[e.stock," ",sw("restants","متبقي")]})]},e.id)),0===eN.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:sw("Tous les stocks sont suffisants","جميع المخزونات كافية")})]})})]})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsx)(D.ZB,{children:sw("Actions rapides","إجراءات سريعة")})}),(0,r.jsx)(D.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(D.$n,{onClick:()=>M("pos"),className:"h-20 flex-col gap-2",children:[(0,r.jsx)(d.A,{className:"w-6 h-6"}),sw("Nouvelle vente","عملية بيع جديدة")]}),(0,r.jsxs)(D.$n,{onClick:()=>B(!0),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,r.jsx)(g.A,{className:"w-6 h-6"}),sw("Ajouter un produit","إضافة منتج")]}),(0,r.jsxs)(D.$n,{onClick:()=>M("inventory"),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,r.jsx)(i.A,{className:"w-6 h-6"}),sw("Voir l'inventaire","عرض المخزون")]}),(0,r.jsxs)(D.$n,{onClick:()=>M("sales"),variant:"outline",className:"h-20 flex-col gap-2",children:[(0,r.jsx)(o.A,{className:"w-6 h-6"}),sw("Historique","السجل")]})]})})]})]}),(0,r.jsxs)(D.av,{value:"inventory",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:sw("Gestion de l'inventaire","إدارة المخزون")}),(0,r.jsxs)(D.$n,{onClick:()=>B(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 ".concat(sy?"ml-2":"mr-2")}),sw("Ajouter un produit","إضافة منتج")]})]}),(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-6",children:[(0,r.jsxs)(D.XI,{children:[(0,r.jsx)(D.A0,{children:(0,r.jsxs)(D.Hj,{children:[(0,r.jsx)(D.nd,{children:"SKU"}),(0,r.jsx)(D.nd,{children:"Nom"}),(0,r.jsx)(D.nd,{children:"Cat\xe9gorie"}),(0,r.jsx)(D.nd,{children:"Prix Co\xfbt"}),(0,r.jsx)(D.nd,{children:"Prix Vente"}),(0,r.jsx)(D.nd,{children:"Stock"}),(0,r.jsx)(D.nd,{children:"Actions"})]})}),(0,r.jsx)(D.BF,{children:eh.map(e=>(0,r.jsxs)(D.Hj,{children:[(0,r.jsx)(D.nA,{className:"font-mono",children:e.sku}),(0,r.jsx)(D.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(D.nA,{children:e.category}),(0,r.jsxs)(D.nA,{children:[e.costPrice," DZD"]}),(0,r.jsxs)(D.nA,{className:"font-semibold",children:[e.sellingPrice," DZD"]}),(0,r.jsx)(D.nA,{children:(0,r.jsx)(D.Ex,{variant:e.stock<=e.lowStockThreshold?"destructive":"default",children:e.stock})}),(0,r.jsx)(D.nA,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(D.$n,{variant:"ghost",size:"icon",onClick:()=>{var s;e2(e),eI({sku:e.sku,name:e.name,category:e.category,description:e.description||"",supplierId:(null==(s=e.supplierId)?void 0:s.toString())||"",costPrice:e.costPrice.toString(),sellingPrice:e.sellingPrice.toString(),price:e.price.toString(),stock:e.stock,lowStockThreshold:e.lowStockThreshold,barcode:e.barcode||"",image:e.image||""}),B(!0)},children:(0,r.jsx)(v.A,{className:"w-4 h-4"})}),(0,r.jsx)(D.$n,{variant:"ghost",size:"icon",onClick:()=>{eq(e.id),eV(!0)},children:(0,r.jsx)(f.A,{className:"w-4 h-4"})}),(0,r.jsx)(D.$n,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>sT(e.id),children:(0,r.jsx)(N.A,{className:"w-4 h-4"})})]})})]},e.id))})]}),0===eh.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(i.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:sw("Aucun produit dans l'inventaire","لا توجد منتجات في المخزون")}),(0,r.jsxs)(D.$n,{onClick:()=>B(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 ".concat(sy?"ml-2":"mr-2")}),sw("Ajouter votre premier produit","أضف أول منتج لك")]})]})]})})]}),(0,r.jsxs)(D.av,{value:"pos",className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Point de Vente"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,r.jsxs)("div",{className:"flex ".concat(sy?"flex-row-reverse":"flex-row"," items-center gap-2"),children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(y.A,{className:"absolute ".concat(sy?"right-3":"left-3"," top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5")}),(0,r.jsx)(D.pd,{placeholder:sw("Rechercher un produit ou scanner un code-barres...","ابحث عن منتج أو امسح رمزاً شريطياً..."),value:eW,onChange:e=>ez(e.target.value),className:"".concat(sy?"pr-10 text-right":"pl-10")})]}),(0,r.jsxs)(D.$n,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>e3(!0),disabled:!e7,children:[(0,r.jsx)(w.A,{className:"w-4 h-4 ".concat(sy?"ml-2":"mr-2")}),sw("Scanner","مسح")]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:eh.filter(e=>{var s;return e.stock>0&&(e.name.toLowerCase().includes(eW.toLowerCase())||e.sku.toLowerCase().includes(eW.toLowerCase())||(null==(s=e.barcode)?void 0:s.includes(eW)))}).map(e=>(0,r.jsx)(D.Zp,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>sS(e),children:(0,r.jsxs)(D.Wu,{className:"p-4",children:[(0,r.jsx)("div",{className:"aspect-square bg-muted rounded-lg mb-3 flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-12 h-12 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mb-2",children:["SKU: ",e.sku]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-lg font-bold text-primary",children:[e.sellingPrice," DZD"]}),(0,r.jsx)(D.Ex,{variant:"secondary",children:e.stock})]})]})},e.id))})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsx)(D.ZB,{children:"Panier"})}),(0,r.jsxs)(D.Wu,{className:"space-y-4",children:[e_.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:e.productName}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.price," DZD"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.$n,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>sF(e.productId,-1),children:(0,r.jsx)(b.A,{className:"w-4 h-4"})}),(0,r.jsx)("span",{className:"w-8 text-center font-semibold",children:e.quantity}),(0,r.jsx)(D.$n,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>sF(e.productId,1),children:(0,r.jsx)(g.A,{className:"w-4 h-4"})}),(0,r.jsx)(D.$n,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{var s;return s=e.productId,void eG(e_.filter(e=>e.id!==s))},children:(0,r.jsx)(N.A,{className:"w-4 h-4"})})]})]},e.productId)),0===e_.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-2 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Panier vide"})]}),(0,r.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Sous-total:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[sA.toFixed(2)," DZD"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(D.JU,{className:"text-sm",children:"Remise:"}),(0,r.jsx)(D.pd,{type:"number",value:eQ,onChange:e=>eY(Number.parseFloat(e.target.value)||0),className:"h-8"}),(0,r.jsx)("span",{className:"text-sm",children:"DZD"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{className:"text-primary",children:[sC.toFixed(2)," DZD"]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(D.$n,{className:"w-full",onClick:()=>sR("cash"),disabled:0===e_.length,children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Payer en Esp\xe8ces"]}),(0,r.jsx)(D.$n,{className:"w-full bg-transparent",variant:"outline",onClick:()=>sR("card"),disabled:0===e_.length,children:"Payer par Carte"})]})]})]})})]})]}),(0,r.jsxs)(D.av,{value:"sales",className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Historique des Ventes"}),(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-6",children:[(0,r.jsxs)(D.XI,{children:[(0,r.jsx)(D.A0,{children:(0,r.jsxs)(D.Hj,{children:[(0,r.jsx)(D.nd,{children:"ID"}),(0,r.jsx)(D.nd,{children:"Date"}),(0,r.jsx)(D.nd,{children:"Articles"}),(0,r.jsx)(D.nd,{children:"Sous-total"}),(0,r.jsx)(D.nd,{children:"Remise"}),(0,r.jsx)(D.nd,{children:"Total"}),(0,r.jsx)(D.nd,{children:"Paiement"})]})}),(0,r.jsx)(D.BF,{children:ei.map(e=>(0,r.jsxs)(D.Hj,{children:[(0,r.jsx)(D.nA,{className:"font-mono text-sm",children:e.id.slice(0,8)}),(0,r.jsx)(D.nA,{children:new Date(e.createdAt).toLocaleString("fr-FR")}),(0,r.jsx)(D.nA,{children:e.items.length}),(0,r.jsxs)(D.nA,{children:[e.subtotal.toFixed(2)," DZD"]}),(0,r.jsxs)(D.nA,{children:[e.discount.toFixed(2)," DZD"]}),(0,r.jsxs)(D.nA,{className:"font-bold",children:[e.total.toFixed(2)," DZD"]}),(0,r.jsx)(D.nA,{children:(0,r.jsx)(D.Ex,{variant:"cash"===e.paymentMethod?"default":"secondary",children:"cash"===e.paymentMethod?"Esp\xe8ces":"Carte"})})]},e.id))})]}),0===ei.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(A.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground",children:"Aucune vente enregistr\xe9e"})]})]})})]}),(0,r.jsxs)(D.av,{value:"customers",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Gestion des Clients"}),(0,r.jsxs)(D.$n,{onClick:()=>_(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ajouter un Client"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:eo.map(e=>(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-6 h-6 text-primary"})}),(0,r.jsxs)(D.Ex,{children:[e.totalPurchases.toFixed(2)," DZD"]})]}),(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.name}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,r.jsx)("p",{children:e.phone}),e.email&&(0,r.jsx)("p",{children:e.email}),e.lastPurchaseDate&&(0,r.jsxs)("p",{className:"text-xs",children:["Dernier achat: ",new Date(e.lastPurchaseDate).toLocaleDateString("fr-FR")]})]})]})},e.id))}),0===eo.length&&(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-12 text-center",children:[(0,r.jsx)(u.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Aucun client enregistr\xe9"}),(0,r.jsxs)(D.$n,{onClick:()=>_(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ajouter votre premier client"]})]})})]}),(0,r.jsxs)(D.av,{value:"suppliers",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Gestion des Fournisseurs"}),(0,r.jsxs)(D.$n,{onClick:()=>X(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ajouter un Fournisseur"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:em.map(e=>(0,r.jsx)(D.Zp,{children:(0,r.jsx)(D.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(m.A,{className:"w-6 h-6 text-orange-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-1",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["Contact: ",e.contactPerson]}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"T\xe9l:"}),(0,r.jsx)("span",{children:e.phone})]}),e.email&&(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Email:"}),(0,r.jsx)("span",{children:e.email})]})]})]})]})})},e.id))}),0===em.length&&(0,r.jsx)(D.Zp,{children:(0,r.jsxs)(D.Wu,{className:"p-12 text-center",children:[(0,r.jsx)(m.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Aucun fournisseur enregistr\xe9"}),(0,r.jsxs)(D.$n,{onClick:()=>X(!0),children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Ajouter votre premier fournisseur"]})]})})]}),(0,r.jsxs)(D.av,{value:"ai",className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Insights Aliment\xe9s par l'IA"}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsxs)(D.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-5 h-5"}),"Pr\xe9visions des Ventes"]})}),(0,r.jsx)(D.Wu,{children:eF?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Semaine Prochaine"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[null==(e=eF.week)?void 0:e.toFixed(2)," DZD"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Mois Prochain"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[null==(s=eF.month)?void 0:s.toFixed(2)," DZD"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["up"===eF.trend?(0,r.jsx)(p.A,{className:"w-5 h-5 text-green-500"}):"down"===eF.trend?(0,r.jsx)(C.A,{className:"w-5 h-5 text-red-500"}):null,(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Tendance:"," ","up"===eF.trend?"Hausse":"down"===eF.trend?"Baisse":"Stable"]})]})]}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"Donn\xe9es insuffisantes pour les pr\xe9visions"})})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsxs)(D.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(i.A,{className:"w-5 h-5"}),"Recommandations de R\xe9approvisionnement"]})}),(0,r.jsx)(D.Wu,{children:e$.length>0?(0,r.jsx)("div",{className:"space-y-3",children:e$.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.productName}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.reason})]}),(0,r.jsxs)(D.Ex,{children:["Commander ",e.recommendedQuantity]})]},e.productId))}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"Aucune recommandation pour le moment"})})]}),(0,r.jsxs)(D.Zp,{children:[(0,r.jsx)(D.aR,{children:(0,r.jsxs)(D.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"w-5 h-5"}),"Suggestions de Bundles"]})}),(0,r.jsx)(D.Wu,{children:eJ.length>0?(0,r.jsx)("div",{className:"space-y-3",children:eJ.map((e,s)=>(0,r.jsxs)("div",{className:"p-3 bg-muted rounded-lg",children:[(0,r.jsxs)("p",{className:"font-medium mb-2",children:["Bundle #",s+1]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Achet\xe9 ensemble ",e.frequency," fois"]}),(0,r.jsxs)(D.Ex,{variant:"secondary",children:["Remise sugg\xe9r\xe9e: ",e.suggestedDiscount,"%"]})]},s))}):(0,r.jsx)("p",{className:"text-muted-foreground",children:"Aucune suggestion de bundle pour le moment"})})]})]})]})]}),(0,r.jsx)(D.lG,{open:z,onOpenChange:B,children:(0,r.jsxs)(D.Cf,{className:"max-w-2xl",children:[(0,r.jsx)(D.c7,{children:(0,r.jsx)(D.L3,{children:e0?"Modifier le Produit":"Ajouter un Produit"})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"SKU"}),(0,r.jsx)(D.pd,{value:eP.sku,onChange:e=>eI({...eP,sku:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Nom du Produit"}),(0,r.jsx)(D.pd,{value:eP.name,onChange:e=>eI({...eP,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Cat\xe9gorie"}),(0,r.jsx)(D.pd,{value:eP.category,onChange:e=>eI({...eP,category:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Code-barres"}),(0,r.jsx)(D.pd,{value:eP.barcode,onChange:e=>eI({...eP,barcode:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Prix Co\xfbt (DZD)"}),(0,r.jsx)(D.pd,{type:"number",value:eP.costPrice,onChange:e=>eI({...eP,costPrice:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Prix Vente (DZD)"}),(0,r.jsx)(D.pd,{type:"number",value:eP.sellingPrice,onChange:e=>eI({...eP,sellingPrice:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Stock Initial"}),(0,r.jsx)(D.pd,{type:"number",value:eP.stock,onChange:e=>eI({...eP,stock:Number(e.target.value)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Seuil Stock Faible"}),(0,r.jsx)(D.pd,{type:"number",value:eP.lowStockThreshold,onChange:e=>eI({...eP,lowStockThreshold:Number(e.target.value)})})]}),(0,r.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,r.jsx)(D.JU,{children:"Photo du Produit (URL)"}),(0,r.jsx)(D.pd,{type:"url",placeholder:"https://exemple.com/produit.jpg ou /placeholder.jpg",value:eP.image,onChange:e=>eI({...eP,image:e.target.value})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fournissez une URL de l'image du produit. Cette photo sera visible dans l'inventaire et pour les clients."}),eP.image&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("img",{src:eP.image,alt:"Aper\xe7u",className:"w-32 h-32 object-cover rounded-lg border",onError:e=>{e.target.src="/placeholder.jpg"}})})]})]}),(0,r.jsxs)(D.Es,{children:[(0,r.jsx)(D.$n,{variant:"outline",onClick:()=>B(!1),children:"Annuler"}),(0,r.jsx)(D.$n,{onClick:sZ,children:"Enregistrer"})]})]})}),(0,r.jsx)(D.lG,{open:H,onOpenChange:_,children:(0,r.jsxs)(D.Cf,{children:[(0,r.jsx)(D.c7,{children:(0,r.jsx)(D.L3,{children:"Ajouter un Client"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Nom"}),(0,r.jsx)(D.pd,{value:eZ.name,onChange:e=>eT({...eZ,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"T\xe9l\xe9phone"}),(0,r.jsx)(D.pd,{value:eZ.phone,onChange:e=>eT({...eZ,phone:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Email (optionnel)"}),(0,r.jsx)(D.pd,{type:"email",value:eZ.email,onChange:e=>eT({...eZ,email:e.target.value})})]})]}),(0,r.jsxs)(D.Es,{children:[(0,r.jsx)(D.$n,{variant:"outline",onClick:()=>_(!1),children:"Annuler"}),(0,r.jsx)(D.$n,{onClick:s$,children:"Enregistrer"})]})]})}),(0,r.jsx)(D.lG,{open:G,onOpenChange:X,children:(0,r.jsxs)(D.Cf,{children:[(0,r.jsx)(D.c7,{children:(0,r.jsx)(D.L3,{children:"Ajouter un Fournisseur"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Nom de l'Entreprise"}),(0,r.jsx)(D.pd,{value:eB.name,onChange:e=>eH({...eB,name:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Personne de Contact"}),(0,r.jsx)(D.pd,{value:eB.contactPerson,onChange:e=>eH({...eB,contactPerson:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"T\xe9l\xe9phone"}),(0,r.jsx)(D.pd,{value:eB.phone,onChange:e=>eH({...eB,phone:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Email (optionnel)"}),(0,r.jsx)(D.pd,{type:"email",value:eB.email,onChange:e=>eH({...eB,email:e.target.value})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D.JU,{children:"Adresse (optionnel)"}),(0,r.jsx)(D.TM,{value:eB.address,onChange:e=>eH({...eB,address:e.target.value})})]})]}),(0,r.jsxs)(D.Es,{children:[(0,r.jsx)(D.$n,{variant:"outline",onClick:()=>X(!1),children:"Annuler"}),(0,r.jsx)(D.$n,{onClick:sU,children:"Enregistrer"})]})]})}),(0,r.jsx)(D.lG,{open:K,onOpenChange:Q,children:(0,r.jsxs)(D.Cf,{children:[(0,r.jsx)(D.c7,{children:(0,r.jsx)(D.L3,{children:"Re\xe7u de Vente"})}),e1&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center border-b pb-4",children:[(0,r.jsx)("p",{className:"font-bold text-lg",children:"ERP - Gestion de Boutique"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Re\xe7u #",e1.id.slice(0,8)]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e1.createdAt).toLocaleString("fr-FR")})]}),(0,r.jsx)("div",{className:"space-y-2",children:e1.items.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{children:[e.quantity,"x ",e.productName]}),(0,r.jsxs)("span",{children:[(e.price*e.quantity).toFixed(2)," DZD"]})]},s))}),(0,r.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Sous-total:"}),(0,r.jsxs)("span",{children:[e1.subtotal.toFixed(2)," DZD"]})]}),e1.discount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsx)("span",{children:"Remise:"}),(0,r.jsxs)("span",{children:["-",e1.discount.toFixed(2)," DZD"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:[e1.total.toFixed(2)," DZD"]})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["Paiement: ","cash"===e1.paymentMethod?"Esp\xe8ces":"Carte"]})]})]}),(0,r.jsxs)(D.Es,{children:[(0,r.jsx)(D.$n,{variant:"outline",onClick:()=>Q(!1),children:"Fermer"}),(0,r.jsxs)(D.$n,{onClick:()=>window.print(),children:[(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),"Imprimer"]})]})]})}),(0,r.jsx)(D.lG,{open:eM,onOpenChange:eV,children:(0,r.jsxs)(D.Cf,{children:[(0,r.jsx)(D.c7,{children:(0,r.jsx)(D.L3,{children:"Capturez une image du produit"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(f.A,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Appuyez sur le bouton ci-dessous pour capturer une image"})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(D.$n,{onClick:()=>eV(!1),className:"w-full",children:[(0,r.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Capturer l'image"]})})]})]})})]}):null}},40283:(e,s,t)=>{"use strict";function r(e){try{let s=localStorage.getItem("cache_".concat(e));if(!s)return null;let{data:t,timestamp:r}=JSON.parse(s);if(Date.now()-r>3e5)return localStorage.removeItem("cache_".concat(e)),null;return t}catch(e){return console.error("[Cache] Error reading cached data:",e),null}}function a(e,s){try{localStorage.setItem("cache_".concat(e),JSON.stringify({data:s,timestamp:Date.now()}))}catch(e){console.error("[Cache] Error setting cached data:",e)}}t.d(s,{H$:()=>a,hi:()=>r})},53486:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var r=t(54568),a=t(7620),n=t(56150),l=t(34567),c=t(45234),i=t(87551),d=t(92568),o=t(51115),u=t(47573),m=t(94581);function x(e){let{title:s="AL-baz",subtitle:t="Delivery",showRefresh:x=!1,onRefresh:h,language:p,setLanguage:j,isDarkMode:g,setIsDarkMode:v}=e,[f,N]=(0,a.useState)((0,m.$b)()),[y,w]=(0,a.useState)((0,m.Sb)()),[b,A]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{A(!0),N((0,m.$b)()),w((0,m.Sb)())},[]),!b)return null;let C="dark"===f||"system"===f&&window.matchMedia("(prefers-color-scheme: dark)").matches;return(0,r.jsx)("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-primary to-orange-500 text-white shadow-lg",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"AL-baz",className:"h-10 w-auto"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold",children:s}),(0,r.jsx)("p",{className:"text-xs text-white/80",children:t})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[x&&h&&(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:h,title:"Refresh",children:(0,r.jsx)(c.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>{let e=(0,m.H4)();w(e),null==j||j(e)},title:"fr"===y?"العربية":"Fran\xe7ais",children:(0,r.jsx)(i.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>{let e=(0,m.OD)();N(e),null==v||v("dark"===e)},title:C?"Light mode":"Dark mode",children:C?(0,r.jsx)(d.A,{className:"w-5 h-5"}):(0,r.jsx)(o.A,{className:"w-5 h-5"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 transition-colors",onClick:()=>(0,l.CI)({callbackUrl:"/login"}),title:"Sign out",children:(0,r.jsx)(u.A,{className:"w-5 h-5"})})]})]})})})}},54228:(e,s,t)=>{Promise.resolve().then(t.bind(t,34359))},67729:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});var r=t(34567),a=t(7620);function n(){var e,s,t;let n=(0,r.wV)(),l=null!=(e=null==n?void 0:n.data)?e:null,c=null!=(s=null==n?void 0:n.status)?s:"loading",[i,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{"loading"!==c&&d(!1)},[c]),{user:null!=(t=null==l?void 0:l.user)?t:null,isAuthenticated:!!(null==l?void 0:l.user),isLoading:i,session:l,status:c}}}},e=>{e.O(0,[724,693,590,587,18,358],()=>e(e.s=54228)),_N_E=e.O()}]);